<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sandu.service.house.dao.DrawBaseHouseMapper">

    <sql id="Base_Column_List">
        id, sys_code, creator, gmt_create, modifier, gmt_modified, is_deleted, house_code,
        house_short_name, house_name, pic_res1_id, pic_res2_id, pic_res3_id, pic_res4_id,
        house_desc, living_id, total_area, total_floors, current_period, house_high, apply_floors,
        house_layout, room_layout, office_layout, way_layout, is_exist_symmetry, symmetry_ids,
        is_merge, merge_ids, merge_new_id, pic_res_id, is_all, house_common_code, house_type_code,
        house_tag, house_status, deal_status, is_review, att1, area_long_code, house_kind,
        att4, att5, att6, date_att1, date_att2, reset_state, num_att2, num_att3, num_att4, data_type,
        remark, area_code, is_public, house_door_code, user_id, base_house_id, snap_pic_id, restore_file_id
    </sql>

    <insert id="saveDrawBaseHouse" useGeneratedKeys="true" keyProperty="id">
        insert into draw_base_house
        (
            sys_code, creator, gmt_create, modifier, user_id,
            is_deleted, house_code, house_short_name, house_name, pic_res1_id,
            pic_res2_id, pic_res3_id, pic_res4_id, house_desc, living_id,
            total_area, total_floors, current_period, house_high, apply_floors,
            house_layout, room_layout, office_layout, way_layout, is_exist_symmetry,
            symmetry_ids, is_merge, merge_ids, merge_new_id, pic_res_id,
            is_all, house_common_code, house_type_code, house_tag, house_status,
            deal_status, is_review, att1, area_long_code, house_kind,
            att4, att5, att6, date_att1, date_att2,
            reset_state, num_att2, num_att3, num_att4, remark,
            area_code, is_public, house_door_code, house_space_num
            <if test="baseHouseId != null">,base_house_id</if>
            <if test="origin != null">, origin</if>
        )values
        (
            #{sysCode}, #{creator}, #{gmtCreate}, #{modifier}, #{userId},
            #{isDeleted}, #{houseCode}, #{houseShortName}, #{houseName}, #{picRes1Id},
            #{picRes2Id}, #{picRes3Id}, #{picRes4Id}, #{houseDesc}, #{livingId},
            #{totalArea}, #{totalFloors}, #{currentPeriod}, #{houseHigh}, #{applyFloors},
            #{houseLayout}, #{roomLayout}, #{officeLayout}, #{wayLayout}, #{isExistSymmetry},
            #{symmetryIds}, #{isMerge}, #{mergeIds}, #{mergeNewId}, #{picResId},
            #{isAll}, #{houseCommonCode}, #{houseTypeCode}, #{houseTag}, #{houseStatus},
            #{dealStatus}, #{isReview}, #{att1}, #{areaLongCode}, #{houseKind},
            #{att4}, #{att5}, #{att6}, #{dateAtt1}, #{dateAtt2},
            #{resetState}, #{numAtt2}, #{numAtt3}, #{numAtt4}, #{remark},
            #{areaCode}, #{isPublic}, #{houseDoorCode}, #{houseSpaceNum}
            <if test="baseHouseId != null">, #{baseHouseId}</if>
            <if test="origin != null">, #{origin}</if>
        )
    </insert>

    <update id="updateDrawBaseHouse">
        UPDATE draw_base_house
        <set>
        	<if test="picRes1Id != null"> pic_res1_id = #{picRes1Id}, </if>
        	<if test="livingId != null"> living_id = #{livingId},  </if>
        	<if test="snapPicId != null"> snap_pic_id = #{snapPicId}, </if>
        	<if test="totalArea != null"> total_area = #{totalArea}, </if>
        	<if test="restoreFileId != null"> restore_file_id = #{restoreFileId}, </if>
        	<if test="houseName != null and houseName != ''"> 
        		house_name = #{houseName}, 
        		<!-- 兼容老数据，WTF!!!! -->
        		house_common_code = #{houseName},
        	</if>
        	<if test="gmtModified != null"> gmt_modified = #{gmtModified}, </if>
        	<if test="modifier != null"> modifier = #{modifier}, </if>
			<if test="houseStatus != null"> house_status = #{houseStatus}, </if>
			<if test="isChangedUser != null and isChangedUser == 1"> user_id = #{userId}, </if>
        </set>
        where id = #{id}
    </update>

    <update id="deleteById">
        update draw_base_house set is_deleted = 1 where is_deleted = 0 and id = #{id}
    </update>

    <select id="getBaseHouseById" resultType="com.sandu.api.house.model.DrawBaseHouse">
        SELECT
		  h.id,
		  h.user_id,
		  h.house_name,
		  h.house_code,
		  h.sys_code,
		  h.is_deleted,
		  h.living_id,
		  h.total_area,
		  h.area_long_code,
		  h.house_status,
		  h.gmt_create,
		  h.gmt_modified,
		  h.is_public,
		  h.base_house_id,
		  h.restore_file_id,
		  h.pic_res1_id,
		  h.snap_pic_id,
		  h.origin,
		  h.perfect_user_id,
		  h.data_type
		FROM
		  draw_base_house h
		WHERE h.is_deleted = 0
		  AND id = #{id}
    </select>

	<select id="countDrawHouse" resultType="java.lang.Long">
		SELECT
		  COUNT(*)
		FROM
		  draw_base_house h
		LEFT JOIN base_living bl
		  ON h.living_id = bl.id
		LEFT JOIN draw_res_file f
		  ON h.restore_file_id = f.id
		LEFT JOIN sys_user u
		  ON u.id = h.user_id
		WHERE h.is_deleted = 0
		  AND bl.is_deleted = 0
		  <!-- AND f.is_deleted = 0 -->
		<include refid="list_draw_house_where_sql" />
	</select>

    <select id="listDrawHouse" resultType="com.sandu.api.house.bo.DrawBaseHouseBO">
        SELECT 
		  h.id,
		  h.house_code,
		  h.house_name,
		  h.gmt_modified,
		  bl.living_name,
		  bl.area_long_code,
		  bl.id living_id,
		  f.file_path,
		  h.house_status,
		  h.reject_reason,
		  u.user_name,
  		  u.mobile user_mobile,
  		  h.snap_pic_id,
		  h.pic_res1_id,
		  h.platform_type
		FROM
		  draw_base_house h 
		  LEFT JOIN base_living bl 
		    ON h.living_id = bl.id 
		  LEFT JOIN draw_res_file f 
		    ON h.restore_file_id = f.id 
		  LEFT JOIN sys_user u 
		    ON u.id = h.user_id 
		WHERE h.is_deleted = 0 
		  AND bl.is_deleted = 0
		  <!-- AND f.is_deleted = 0 -->
		<include refid="list_draw_house_where_sql" />
        ORDER BY h.gmt_modified DESC
        LIMIT #{pageNum}, #{pageSize}
    </select>

	<sql id="list_draw_house_where_sql">
		<if test="null != checkArgs and checkArgs.length > 0">
			AND h.house_status IN
			<foreach collection="checkArgs" item="item" open="(" separator="," close=")">
				#{item}
			</foreach>
		</if>
		<if test="null != keyword and keyword != ''">
			AND CONCAT(bl.living_name, h.house_name) LIKE CONCAT('%', #{keyword}, '%')
		</if>
		<if test="null != areaCode and areaCode != ''">
			AND h.area_long_code LIKE CONCAT('%', #{areaCode}, '%')
		</if>
		<if test="null != companyId"> AND u.business_administration_id = #{companyId} </if>
		<if test="null != userId"> AND h.user_id = #{userId} </if>
		<if test="null != platformType"> AND h.platform_type = #{platformType} </if>
	</sql>
    
    <select id="listDrawHouseResource" resultType="com.sandu.api.house.bo.DrawBaseHouseBO">
		SELECT 
		  h.id,
		  p.pic_path 
		FROM
		  draw_base_house h 
		  LEFT JOIN draw_res_house_pic p 
		  <choose>
		  	<!-- 截图 -->
		  	<when test="isSnapPic != null"> ON p.id = h.snap_pic_id </when>
		  	<!-- 户型图 -->
		  	<otherwise> ON p.id = h.pic_res1_id </otherwise>
		  </choose>
		WHERE h.is_deleted = 0 
		  AND p.is_deleted = 0
		  <if test="drawHouse != null and drawHouse.size > 0">
		  	AND h.id IN
		  	<foreach collection="drawHouse" item="item" open="(" separator="," close=")">
		  		#{item.id}
		  	</foreach>
		  </if>
    </select>
    
    <update id="updateDrawHouseStatus">
        UPDATE 
		  draw_base_house 
		SET
		  house_status = #{checkStatus}
		  <if test="rejectReason != null and rejectReason != ''">
		  	, reject_reason = #{rejectReason}
		  </if>
		WHERE id = #{houseId} 
    </update>
    
    <update id="updateDrawHouseStatus2">
        UPDATE 
		  draw_base_house
		<set>
			house_status = #{checkStatus},
			<if test="rejectReason != null and rejectReason != ''">
				reject_reason = #{rejectReason},
			</if>
		</set>
		WHERE id = #{houseId}
			AND house_status = #{houseStatus}
    </update>

	<update id="updateDrawHouseStatus3">
		UPDATE
		  draw_base_house
		<set>
			house_status = #{checkStatus},
			<if test="checkHouse.rejectReason != null and checkHouse.rejectReason != ''">
				reject_reason = #{checkHouse.rejectReason},
			</if>
			<if test="checkHouse.auditorId != null">
				auditor_id = #{checkHouse.auditorId},
			</if>
			<if test="checkHouse.auditTime != null">
				audit_time = #{checkHouse.auditTime},
			</if>
		</set>
		WHERE id = #{checkHouse.id}
		  AND house_status = #{checkHouse.houseStatus}
	</update>
    
    <update id="updateStatusByHouseId">
    	UPDATE 
		  base_house h 
		SET
		  h.is_deleted = #{status} 
		where h.id = #{houseId} 
    </update>

	<select id="selectConutHouses" resultType="java.lang.Integer">
		SELECT
		 COUNT(*)
		FROM
		base_house bh
		LEFT JOIN res_house_pic r ON bh.pic_res1_id = r.id
		LEFT JOIN base_living bl ON bl.id = bh.living_id
		LEFT JOIN base_area ba ON bl.area_id = ba.area_code
		WHERE
		bh.is_deleted = 0
		and bh.data_type = 0
		<if test="areaCode != null and areaCode != ''"> and  ba.pid =#{areaCode}</if>
		<if test="livingId != null and livingId != '' "> and bh.living_id = #{livingId}</if>
		<if test="livingName != null and livingName != '' "> and bl.living_name  LIKE  CONCAT('%', #{livingName}, '%') </if>
		<if test="isPublic != null and isPublic != '' "> and bh.is_public = #{isPublic}</if>
	</select>

	<select id="selectCountAllHouses" resultType="java.lang.Integer">
		SELECT
		COUNT(*)
		FROM
		base_house bh
		INNER JOIN res_house_pic r ON bh.pic_res1_id = r.id
		WHERE
		bh.is_deleted = 0
		and bh.data_type = 0
	</select>

	<select id="getHouses" resultType="com.sandu.api.house.bo.DrawBaseHouseBO">
		SELECT
			bh.id,
			r.pic_path,
			r.id,
			bh.total_area,
			bh.house_short_name,
			bh.user_id,
			bh.deal_status,
			bh.is_standard,
			bh.living_id,
			bl.living_name,
			bh.snap_pic_id,
			bh.house_common_code AS house_name
		FROM
			base_house bh
		LEFT JOIN res_house_pic r
			ON bh.pic_res1_id = r.id
		LEFT JOIN base_living bl
			ON bl.id = bh.living_id
		LEFT JOIN base_area ba
			ON bl.area_id = ba.area_code
		WHERE bh.is_deleted = 0
		and bh.data_type = 0
		<if test="areaCode != null and areaCode != ''"> and  ba.pid =#{areaCode}</if>
		<if test="livingId != null and livingId != '' "> and bh.living_id = #{livingId}</if>
		<if test="livingName != null and livingName != '' "> and bl.living_name  LIKE  CONCAT('%', #{livingName}, '%') </if>
		<if test="isPublic != null and isPublic != '' "> and bh.is_public = #{isPublic}</if>
		LIMIT #{pageNum},#{pageSize}
	</select>
    <!-- drf.pic_path,-->
	<select id="selectHouseAndPicPathById" resultType="com.sandu.api.house.bo.DrawBaseHouseBO">
     SELECT
		  r.pic_path,
          bl.area_id,
		  bl.living_name,
		  bl.living_code
      FROM
         base_house bh
        LEFT  JOIN res_house_pic r  ON bh.pic_res1_id = r.id
		LEFT  JOIN  base_living bl ON bh.living_id = bl.id
      WHERE
		bh.is_deleted =0
      <if test="houseId != null and houseId != '' ">and bh.id = #{houseId}</if>
	</select>

	<resultMap id="BaseResultMap" type="com.sandu.api.house.model.DrawBaseHouse">
		<id column="id" jdbcType="BIGINT" property="id" />
		<result column="sys_code" jdbcType="VARCHAR" property="sysCode" />
		<result column="user_id" jdbcType="BIGINT" property="userId" />
		<result column="creator" jdbcType="VARCHAR" property="creator" />
		<result column="gmt_create" jdbcType="TIMESTAMP" property="gmtCreate" />
		<result column="modifier" jdbcType="VARCHAR" property="modifier" />
		<result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified" />
		<result column="is_deleted" jdbcType="INTEGER" property="isDeleted" />
		<result column="house_code" jdbcType="VARCHAR" property="houseCode" />
		<result column="house_short_name" jdbcType="VARCHAR" property="houseShortName" />
		<result column="house_name" jdbcType="VARCHAR" property="houseName" />
		<result column="pic_res1_id" jdbcType="INTEGER" property="picRes1Id" />
		<result column="pic_res2_id" jdbcType="INTEGER" property="picRes2Id" />
		<result column="pic_res3_id" jdbcType="INTEGER" property="picRes3Id" />
		<result column="pic_res4_id" jdbcType="INTEGER" property="picRes4Id" />
		<result column="house_desc" jdbcType="VARCHAR" property="houseDesc" />
		<result column="living_id" jdbcType="INTEGER" property="livingId" />
		<result column="total_area" jdbcType="VARCHAR" property="totalArea" />
		<result column="total_floors" jdbcType="VARCHAR" property="totalFloors" />
		<result column="current_period" jdbcType="VARCHAR" property="currentPeriod" />
		<result column="house_high" jdbcType="VARCHAR" property="houseHigh" />
		<result column="apply_floors" jdbcType="VARCHAR" property="applyFloors" />
		<result column="house_layout" jdbcType="VARCHAR" property="houseLayout" />
		<result column="room_layout" jdbcType="VARCHAR" property="roomLayout" />
		<result column="office_layout" jdbcType="VARCHAR" property="officeLayout" />
		<result column="way_layout" jdbcType="VARCHAR" property="wayLayout" />
		<result column="is_exist_symmetry" jdbcType="VARCHAR" property="isExistSymmetry" />
		<result column="symmetry_ids" jdbcType="VARCHAR" property="symmetryIds" />
		<result column="is_merge" jdbcType="VARCHAR" property="isMerge" />
		<result column="merge_ids" jdbcType="VARCHAR" property="mergeIds" />
		<result column="merge_new_id" jdbcType="INTEGER" property="mergeNewId" />
		<result column="pic_res_id" jdbcType="INTEGER" property="picResId" />
		<result column="is_all" jdbcType="INTEGER" property="isAll" />
		<result column="house_common_code" jdbcType="VARCHAR" property="houseCommonCode" />
		<result column="house_type_code" jdbcType="VARCHAR" property="houseTypeCode" />
		<result column="house_tag" jdbcType="VARCHAR" property="houseTag" />
		<result column="house_status" jdbcType="VARCHAR" property="houseStatus" />
		<result column="deal_status" jdbcType="VARCHAR" property="dealStatus" />
		<result column="is_review" jdbcType="VARCHAR" property="isReview" />
		<result column="att1" jdbcType="VARCHAR" property="att1" />
		<result column="area_long_code" jdbcType="VARCHAR" property="areaLongCode" />
		<result column="house_kind" jdbcType="VARCHAR" property="houseKind" />
		<result column="att4" jdbcType="VARCHAR" property="att4" />
		<result column="att5" jdbcType="VARCHAR" property="att5" />
		<result column="att6" jdbcType="VARCHAR" property="att6" />
		<result column="date_att1" jdbcType="TIMESTAMP" property="dateAtt1" />
		<result column="date_att2" jdbcType="TIMESTAMP" property="dateAtt2" />
		<result column="reset_state" jdbcType="INTEGER" property="resetState" />
		<result column="num_att2" jdbcType="INTEGER" property="numAtt2" />
		<result column="num_att3" jdbcType="DECIMAL" property="numAtt3" />
		<result column="num_att4" jdbcType="DECIMAL" property="numAtt4" />
		<result column="remark" jdbcType="VARCHAR" property="remark" />
		<result column="area_code" jdbcType="VARCHAR" property="areaCode" />
		<result column="is_public" jdbcType="INTEGER" property="isPublic" />
		<result column="house_door_code" jdbcType="VARCHAR" property="houseDoorCode" />
		<result column="house_space_num" jdbcType="VARCHAR" property="houseSpaceNum" />
		<result column="base_house_id" jdbcType="BIGINT" property="baseHouseId" />
		<result column="data_type" jdbcType="SMALLINT" property="dataType" />
		<result column="restore_file_id" jdbcType="BIGINT" property="restoreFileId" />
		<result column="snap_pic_id" jdbcType="BIGINT" property="snapPicId" />
	</resultMap>

	<select id="selectHouseAndRestoreFile" resultType="com.sandu.api.house.bo.DrawBaseHouseBO">
		SELECT
		rf.file_path,
		bl.area_id,
		bl.living_name,
		bl.living_code,
		rhp.pic_path
		FROM
		  base_house bh
		LEFT JOIN  res_file rf ON bh.restore_file_id = rf.id
		LEFT JOIN  base_living bl ON bh.living_id = bl.id
		LEFT JOIN  res_house_pic rhp ON rhp.id = bh.pic_res1_id
		WHERE
		bh.is_deleted =0
		<if test="houseId != null and houseId != '' ">and bh.id = #{houseId}</if>
	</select>
	
	<select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
		select 
		<include refid="Base_Column_List" />
		from draw_base_house
		where id = #{id,jdbcType=BIGINT}
		and is_deleted = 0
	</select>
	
	<!-- transformToBaseHouse -->
	<insert id="transformToBaseHouse" parameterType="com.sandu.api.house.model.DrawBaseHouse" useGeneratedKeys="true" keyProperty="baseHouseId">
		insert into base_house
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="sysCode != null">
				sys_code,
			</if>
			<if test="creator != null">
				creator,
			</if>
			<if test="gmtCreate != null">
				gmt_create,
			</if>
			<if test="modifier != null">
				modifier,
			</if>
			<if test="gmtModified != null">
				gmt_modified,
			</if>
			<if test="isDeleted != null">
				is_deleted,
			</if>
			<if test="houseCode != null">
				house_code,
			</if>
			<if test="houseShortName != null">
				house_short_name,
			</if>
			<if test="houseName != null">
				house_name,
			</if>
			<if test="picRes1Id != null">
				pic_res1_id,
			</if>
			<if test="picRes2Id != null">
				pic_res2_id,
			</if>
			<if test="picRes3Id != null">
				pic_res3_id,
			</if>
			<if test="picRes4Id != null">
				pic_res4_id,
			</if>
			<if test="houseDesc != null">
				house_desc,
			</if>
			<if test="livingId != null">
				living_id,
			</if>
			<if test="totalArea != null">
				total_area,
			</if>
			<if test="totalFloors != null">
				total_floors,
			</if>
			<if test="currentPeriod != null">
				current_period,
			</if>
			<if test="houseHigh != null">
				house_high,
			</if>
			<if test="applyFloors != null">
				apply_floors,
			</if>
			<if test="houseLayout != null">
				house_layout,
			</if>
			<if test="roomLayout != null">
				room_layout,
			</if>
			<if test="officeLayout != null">
				office_layout,
			</if>
			<if test="wayLayout != null">
				way_layout,
			</if>
			<if test="isExistSymmetry != null">
				is_exist_symmetry,
			</if>
			<if test="symmetryIds != null">
				symmetry_ids,
			</if>
			<if test="isMerge != null">
				is_merge,
			</if>
			<if test="mergeIds != null">
				merge_ids,
			</if>
			<if test="mergeNewId != null">
				merge_new_id,
			</if>
			<if test="picResId != null">
				pic_res_id,
			</if>
			<if test="isAll != null">
				is_all,
			</if>
			<if test="houseCommonCode != null">
				house_common_code,
			</if>
			<if test="houseTypeCode != null">
				house_type_code,
			</if>
			<if test="houseTag != null">
				house_tag,
			</if>
			<if test="houseStatus != null">
				house_status,
			</if>
			<if test="dealStatus != null">
				deal_status,
			</if>
			<if test="isReview != null">
				is_review,
			</if>
			<if test="att1 != null">
				att1,
			</if>
			<if test="areaLongCode != null">
				area_long_code,
			</if>
			<if test="houseKind != null">
				house_kind,
			</if>
			<if test="att4 != null">
				att4,
			</if>
			<if test="att5 != null">
				att5,
			</if>
			<if test="att6 != null">
				att6,
			</if>
			<if test="dateAtt1 != null">
				date_att1,
			</if>
			<if test="dateAtt2 != null">
				date_att2,
			</if>
			<if test="resetState != null">
				reset_state,
			</if>
			<if test="numAtt2 != null">
				num_att2,
			</if>
			<if test="numAtt3 != null">
				num_att3,
			</if>
			<if test="numAtt4 != null">
				num_att4,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="areaCode != null">
				area_code,
			</if>
			<if test="isPublic != null">
				is_public,
			</if>
			<if test="houseDoorCode != null">
				house_door_code,
			</if>
			<if test="houseSpaceNum != null">
				house_space_num,
			</if>
			<if test="snapPicId != null">
				snap_pic_id,
			</if>
			<if test="restoreFileId != null">
				restore_file_id,
			</if>
			<if test="dataType != null">
				data_type,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="sysCode != null">
				#{sysCode,jdbcType=VARCHAR},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="gmtCreate != null">
				#{gmtCreate,jdbcType=TIMESTAMP},
			</if>
			<if test="modifier != null">
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="gmtModified != null">
				#{gmtModified,jdbcType=TIMESTAMP},
			</if>
			<if test="isDeleted != null">
				#{isDeleted,jdbcType=INTEGER},
			</if>
			<if test="houseCode != null">
				#{houseCode,jdbcType=VARCHAR},
			</if>
			<if test="houseShortName != null">
				#{houseShortName,jdbcType=VARCHAR},
			</if>
			<if test="houseName != null">
				#{houseName,jdbcType=VARCHAR},
			</if>
			<if test="picRes1Id != null">
				#{picRes1Id,jdbcType=INTEGER},
			</if>
			<if test="picRes2Id != null">
				#{picRes2Id,jdbcType=INTEGER},
			</if>
			<if test="picRes3Id != null">
				#{picRes3Id,jdbcType=INTEGER},
			</if>
			<if test="picRes4Id != null">
				#{picRes4Id,jdbcType=INTEGER},
			</if>
			<if test="houseDesc != null">
				#{houseDesc,jdbcType=VARCHAR},
			</if>
			<if test="livingId != null">
				#{livingId,jdbcType=INTEGER},
			</if>
			<if test="totalArea != null">
				#{totalArea,jdbcType=VARCHAR},
			</if>
			<if test="totalFloors != null">
				#{totalFloors,jdbcType=VARCHAR},
			</if>
			<if test="currentPeriod != null">
				#{currentPeriod,jdbcType=VARCHAR},
			</if>
			<if test="houseHigh != null">
				#{houseHigh,jdbcType=VARCHAR},
			</if>
			<if test="applyFloors != null">
				#{applyFloors,jdbcType=VARCHAR},
			</if>
			<if test="houseLayout != null">
				#{houseLayout,jdbcType=VARCHAR},
			</if>
			<if test="roomLayout != null">
				#{roomLayout,jdbcType=VARCHAR},
			</if>
			<if test="officeLayout != null">
				#{officeLayout,jdbcType=VARCHAR},
			</if>
			<if test="wayLayout != null">
				#{wayLayout,jdbcType=VARCHAR},
			</if>
			<if test="isExistSymmetry != null">
				#{isExistSymmetry,jdbcType=VARCHAR},
			</if>
			<if test="symmetryIds != null">
				#{symmetryIds,jdbcType=VARCHAR},
			</if>
			<if test="isMerge != null">
				#{isMerge,jdbcType=VARCHAR},
			</if>
			<if test="mergeIds != null">
				#{mergeIds,jdbcType=VARCHAR},
			</if>
			<if test="mergeNewId != null">
				#{mergeNewId,jdbcType=INTEGER},
			</if>
			<if test="picResId != null">
				#{picResId,jdbcType=INTEGER},
			</if>
			<if test="isAll != null">
				#{isAll,jdbcType=INTEGER},
			</if>
			<if test="houseCommonCode != null">
				#{houseCommonCode,jdbcType=VARCHAR},
			</if>
			<if test="houseTypeCode != null">
				#{houseTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="houseTag != null">
				#{houseTag,jdbcType=VARCHAR},
			</if>
			<if test="houseStatus != null">
				#{houseStatus,jdbcType=VARCHAR},
			</if>
			<if test="dealStatus != null">
				#{dealStatus,jdbcType=VARCHAR},
			</if>
			<if test="isReview != null">
				#{isReview,jdbcType=VARCHAR},
			</if>
			<if test="att1 != null">
				#{att1,jdbcType=VARCHAR},
			</if>
			<if test="areaLongCode != null">
				#{areaLongCode,jdbcType=VARCHAR},
			</if>
			<if test="houseKind != null">
				#{houseKind,jdbcType=VARCHAR},
			</if>
			<if test="att4 != null">
				#{att4,jdbcType=VARCHAR},
			</if>
			<if test="att5 != null">
				#{att5,jdbcType=VARCHAR},
			</if>
			<if test="att6 != null">
				#{att6,jdbcType=VARCHAR},
			</if>
			<if test="dateAtt1 != null">
				#{dateAtt1,jdbcType=TIMESTAMP},
			</if>
			<if test="dateAtt2 != null">
				#{dateAtt2,jdbcType=TIMESTAMP},
			</if>
			<if test="resetState != null">
				#{resetState,jdbcType=INTEGER},
			</if>
			<if test="numAtt2 != null">
				#{numAtt2,jdbcType=INTEGER},
			</if>
			<if test="numAtt3 != null">
				#{numAtt3,jdbcType=DECIMAL},
			</if>
			<if test="numAtt4 != null">
				#{numAtt4,jdbcType=DECIMAL},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="areaCode != null">
				#{areaCode,jdbcType=VARCHAR},
			</if>
			<if test="isPublic != null">
				#{isPublic,jdbcType=INTEGER},
			</if>
			<if test="houseDoorCode != null">
				#{houseDoorCode,jdbcType=VARCHAR},
			</if>
			<if test="houseSpaceNum != null">
				#{houseSpaceNum,jdbcType=VARCHAR},
			</if>
			<if test="snapPicId != null">
				#{snapPicId},
			</if>
			<if test="restoreFileId != null">
				#{restoreFileId},
			</if>
			<if test="dataType != null">
				#{dataType},
			</if>
		</trim>
	</insert>

	<update id="updateByPrimaryKeySelective" parameterType="com.sandu.api.house.model.DrawBaseHouse">
		update draw_base_house
		<set>
			<if test="sysCode != null">
				sys_code = #{sysCode,jdbcType=VARCHAR},
			</if>
			<if test="userId != null">
				user_id = #{userId,jdbcType=BIGINT},
			</if>
			<if test="creator != null">
				creator = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="gmtCreate != null">
				gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
			</if>
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
			<if test="gmtModified != null">
				gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
			</if>
			<if test="isDeleted != null">
				is_deleted = #{isDeleted,jdbcType=INTEGER},
			</if>
			<if test="houseCode != null">
				house_code = #{houseCode,jdbcType=VARCHAR},
			</if>
			<if test="houseShortName != null">
				house_short_name = #{houseShortName,jdbcType=VARCHAR},
			</if>
			<if test="houseName != null">
				house_name = #{houseName,jdbcType=VARCHAR},
			</if>
			<if test="picRes1Id != null">
				pic_res1_id = #{picRes1Id,jdbcType=INTEGER},
			</if>
			<if test="picRes2Id != null">
				pic_res2_id = #{picRes2Id,jdbcType=INTEGER},
			</if>
			<if test="picRes3Id != null">
				pic_res3_id = #{picRes3Id,jdbcType=INTEGER},
			</if>
			<if test="picRes4Id != null">
				pic_res4_id = #{picRes4Id,jdbcType=INTEGER},
			</if>
			<if test="houseDesc != null">
				house_desc = #{houseDesc,jdbcType=VARCHAR},
			</if>
			<if test="livingId != null">
				living_id = #{livingId,jdbcType=INTEGER},
			</if>
			<if test="totalArea != null">
				total_area = #{totalArea,jdbcType=VARCHAR},
			</if>
			<if test="totalFloors != null">
				total_floors = #{totalFloors,jdbcType=VARCHAR},
			</if>
			<if test="currentPeriod != null">
				current_period = #{currentPeriod,jdbcType=VARCHAR},
			</if>
			<if test="houseHigh != null">
				house_high = #{houseHigh,jdbcType=VARCHAR},
			</if>
			<if test="applyFloors != null">
				apply_floors = #{applyFloors,jdbcType=VARCHAR},
			</if>
			<if test="houseLayout != null">
				house_layout = #{houseLayout,jdbcType=VARCHAR},
			</if>
			<if test="roomLayout != null">
				room_layout = #{roomLayout,jdbcType=VARCHAR},
			</if>
			<if test="officeLayout != null">
				office_layout = #{officeLayout,jdbcType=VARCHAR},
			</if>
			<if test="wayLayout != null">
				way_layout = #{wayLayout,jdbcType=VARCHAR},
			</if>
			<if test="isExistSymmetry != null">
				is_exist_symmetry = #{isExistSymmetry,jdbcType=VARCHAR},
			</if>
			<if test="symmetryIds != null">
				symmetry_ids = #{symmetryIds,jdbcType=VARCHAR},
			</if>
			<if test="isMerge != null">
				is_merge = #{isMerge,jdbcType=VARCHAR},
			</if>
			<if test="mergeIds != null">
				merge_ids = #{mergeIds,jdbcType=VARCHAR},
			</if>
			<if test="mergeNewId != null">
				merge_new_id = #{mergeNewId,jdbcType=INTEGER},
			</if>
			<if test="picResId != null">
				pic_res_id = #{picResId,jdbcType=INTEGER},
			</if>
			<if test="isAll != null">
				is_all = #{isAll,jdbcType=INTEGER},
			</if>
			<if test="houseCommonCode != null">
				house_common_code = #{houseCommonCode,jdbcType=VARCHAR},
			</if>
			<if test="houseTypeCode != null">
				house_type_code = #{houseTypeCode,jdbcType=VARCHAR},
			</if>
			<if test="houseTag != null">
				house_tag = #{houseTag,jdbcType=VARCHAR},
			</if>
			<if test="houseStatus != null">
				house_status = #{houseStatus,jdbcType=VARCHAR},
			</if>
			<if test="dealStatus != null">
				deal_status = #{dealStatus,jdbcType=VARCHAR},
			</if>
			<if test="isReview != null">
				is_review = #{isReview,jdbcType=VARCHAR},
			</if>
			<if test="att1 != null">
				att1 = #{att1,jdbcType=VARCHAR},
			</if>
			<if test="areaLongCode != null">
				area_long_code = #{areaLongCode,jdbcType=VARCHAR},
			</if>
			<if test="houseKind != null">
				house_kind = #{houseKind,jdbcType=VARCHAR},
			</if>
			<if test="att4 != null">
				att4 = #{att4,jdbcType=VARCHAR},
			</if>
			<if test="att5 != null">
				att5 = #{att5,jdbcType=VARCHAR},
			</if>
			<if test="att6 != null">
				att6 = #{att6,jdbcType=VARCHAR},
			</if>
			<if test="dateAtt1 != null">
				date_att1 = #{dateAtt1,jdbcType=TIMESTAMP},
			</if>
			<if test="dateAtt2 != null">
				date_att2 = #{dateAtt2,jdbcType=TIMESTAMP},
			</if>
			<if test="resetState != null">
				reset_state = #{resetState,jdbcType=INTEGER},
			</if>
			<if test="numAtt2 != null">
				num_att2 = #{numAtt2,jdbcType=INTEGER},
			</if>
			<if test="numAtt3 != null">
				num_att3 = #{numAtt3,jdbcType=DECIMAL},
			</if>
			<if test="numAtt4 != null">
				num_att4 = #{numAtt4,jdbcType=DECIMAL},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="areaCode != null">
				area_code = #{areaCode,jdbcType=VARCHAR},
			</if>
			<if test="isPublic != null">
				is_public = #{isPublic,jdbcType=INTEGER},
			</if>
			<if test="houseDoorCode != null">
				house_door_code = #{houseDoorCode,jdbcType=VARCHAR},
			</if>
			<if test="houseSpaceNum != null">
				house_space_num = #{houseSpaceNum,jdbcType=VARCHAR},
			</if>
			<if test="baseHouseId != null">
				base_house_id = #{baseHouseId,jdbcType=BIGINT},
			</if>
			<if test="platformType != null">
				platform_type = #{platformType,jdbcType=SMALLINT},
			</if>
			<if test="bugfixStatus != null">
				bugfix_status = #{bugfixStatus,jdbcType=SMALLINT},
			</if>
		</set>
		where id = #{id,jdbcType=BIGINT}
	</update>
	
	<select id="selectDrawHouseRestoreFile" resultType="com.sandu.api.house.bo.DrawBaseHouseBO">
		SELECT
		  drf.file_path,
		  bl.area_id,
		  bl.living_name,
		  bl.living_code,
		  drhp.pic_path,
		  dbh.house_name,
		  dbh.platform_type,
		  dbh.id
		FROM
		  draw_base_house dbh
		LEFT JOIN  draw_res_file drf ON dbh.restore_file_id = drf.id
		LEFT JOIN  base_living bl ON dbh.living_id = bl.id
		LEFT JOIN  draw_res_house_pic drhp ON drhp.id = dbh.pic_res1_id
		WHERE dbh.is_deleted = 0
		  <if test="houseId != null and houseId != '' "> and dbh.id = #{houseId}</if>
	</select>
	
	<select id="getDrawHouseFileResource" resultType="com.sandu.api.house.bo.DrawHouseResouceBO">
		SELECT 
		  h.id AS house_id,
		  hp.id AS pic_res1_id,
		  hp.pic_path AS pic_res1_path,
		  hps.id AS snap_pic_id,
		  hps.pic_path AS snap_pic_path,
		  f.id AS restore_file_id,
		  f.file_path AS restore_file_path 
		FROM
		  draw_base_house h 
		  LEFT JOIN draw_res_house_pic hp 
		    ON h.pic_res1_id = hp.id 
		  LEFT JOIN draw_res_house_pic hps 
		    ON h.snap_pic_id = hps.id 
		  LEFT JOIN draw_res_file f 
		    ON h.restore_file_id = f.id 
		WHERE h.is_deleted = 0
		  AND h.id = #{houseId}
	</select>

	<select id="getHouseFileResource" resultType="com.sandu.api.house.bo.DrawHouseResouceBO">
		SELECT
		  h.id AS house_id,
		  hp.id AS pic_res1_id,
		  hp.pic_path AS pic_res1_path,
		  hps.id AS snap_pic_id,
		  hps.pic_path AS snap_pic_path,
		  f.id AS restore_file_id,
		  f.file_path AS restore_file_path
		FROM
		  draw_base_house h
		  LEFT JOIN draw_res_house_pic hp
		    ON h.pic_res1_id = hp.id
		  LEFT JOIN draw_res_house_pic hps
		    ON h.snap_pic_id = hps.id
		  LEFT JOIN draw_res_file f
		    ON h.restore_file_id = f.id
		WHERE h.is_deleted = 0
		  AND h.base_house_id = #{baseHouseId}
	</select>
	
	<insert id="insertSelective" useGeneratedKeys="true" keyProperty="id">
		insert into draw_base_house
		<trim prefix="(" suffix=")" suffixOverrides=",">
<!-- 			<if test="id != null">id,</if> -->
			<if test="sysCode != null">sys_code,</if>
			<if test="userId != null">user_id,</if>
			<if test="creator != null">creator,</if>
			<if test="gmtCreate != null">gmt_create,</if>
			<if test="modifier != null">modifier,</if>
			<if test="gmtModified != null">gmt_modified,</if>
			<if test="isDeleted != null">is_deleted,</if>
			<if test="houseCode != null">house_code,</if>
			<if test="houseShortName != null">house_short_name,</if>
			<if test="houseName != null and houseName != ''">house_name,</if>
			<if test="picRes1Id != null">pic_res1_id,</if>
			<if test="picRes2Id != null">pic_res2_id,</if>
			<if test="picRes3Id != null">pic_res3_id,</if>
			<if test="picRes4Id != null">pic_res4_id,</if>
			<if test="houseDesc != null">house_desc,</if>
			<if test="livingId != null">living_id,</if>
			<if test="totalArea != null">total_area,</if>
			<if test="totalFloors != null">total_floors,</if>
			<if test="currentPeriod != null">current_period,</if>
			<if test="houseHigh != null">house_high,</if>
			<if test="applyFloors != null">apply_floors,</if>
			<if test="houseLayout != null">house_layout,</if>
			<if test="roomLayout != null">room_layout,</if>
			<if test="officeLayout != null">office_layout,</if>
			<if test="wayLayout != null">way_layout,</if>
			<if test="isExistSymmetry != null">is_exist_symmetry,</if>
			<if test="symmetryIds != null">symmetry_ids,</if>
			<if test="isMerge != null">is_merge,</if>
			<if test="mergeIds != null">merge_ids,</if>
			<if test="mergeNewId != null">merge_new_id,</if>
			<if test="picResId != null">pic_res_id,</if>
			<if test="isAll != null">is_all,</if>
			<if test="houseCommonCode != null">house_common_code,</if>
			<if test="houseTypeCode != null">house_type_code,</if>
			<if test="houseTag != null">house_tag,</if>
			<if test="houseStatus != null">house_status,</if>
			<if test="dealStatus != null">deal_status,</if>
			<if test="isReview != null">is_review,</if>
			<if test="att1 != null">att1,</if>
			<if test="areaLongCode != null">area_long_code,</if>
			<if test="houseKind != null">house_kind,</if>
			<if test="att4 != null">att4,</if>
			<if test="att5 != null">att5,</if>
			<if test="att6 != null">att6,</if>
			<if test="dateAtt1 != null">date_att1,</if>
			<if test="dateAtt2 != null">date_att2,</if>
			<if test="resetState != null">reset_state,</if>
			<if test="numAtt2 != null">num_att2,</if>
			<if test="numAtt3 != null">num_att3,</if>
			<if test="numAtt4 != null">num_att4,</if>
			<if test="remark != null">remark,</if>
			<if test="areaCode != null">area_code,</if>
			<if test="isPublic != null">is_public,</if>
			<if test="houseDoorCode != null">house_door_code,</if>
			<if test="houseSpaceNum != null">house_space_num,</if>
			<if test="baseHouseId != null">base_house_id,</if>
			<if test="snapPicId != null">snap_pic_id,</if>
			<if test="origin != null">origin,</if>
			<if test="restoreFileId != null">restore_file_id,</if>
			<if test="dataType != null">data_type,</if>
			<if test="platformType != null">platform_type,</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
<!-- 			<if test="id != null">#{id,jdbcType=BIGINT},</if> -->
			<if test="sysCode != null">#{sysCode,jdbcType=VARCHAR},</if>
			<if test="userId != null">#{userId,jdbcType=BIGINT},</if>
			<if test="creator != null">#{creator,jdbcType=VARCHAR},</if>
			<if test="gmtCreate != null">#{gmtCreate,jdbcType=TIMESTAMP},</if>
			<if test="modifier != null">#{modifier,jdbcType=VARCHAR},</if>
			<if test="gmtModified != null">#{gmtModified,jdbcType=TIMESTAMP},</if>
			<if test="isDeleted != null">#{isDeleted,jdbcType=INTEGER},</if>
			<if test="houseCode != null">#{houseCode,jdbcType=VARCHAR},</if>
			<if test="houseShortName != null">#{houseShortName,jdbcType=VARCHAR},</if>
			<if test="houseName != null and houseName != ''">#{houseName,jdbcType=VARCHAR},</if>
			<if test="picRes1Id != null">#{picRes1Id,jdbcType=INTEGER},</if>
			<if test="picRes2Id != null">#{picRes2Id,jdbcType=INTEGER},</if>
			<if test="picRes3Id != null">#{picRes3Id,jdbcType=INTEGER},</if>
			<if test="picRes4Id != null">#{picRes4Id,jdbcType=INTEGER},</if>
			<if test="houseDesc != null">#{houseDesc,jdbcType=VARCHAR},</if>
			<if test="livingId != null">#{livingId,jdbcType=INTEGER},</if>
			<if test="totalArea != null">#{totalArea,jdbcType=VARCHAR},</if>
			<if test="totalFloors != null">#{totalFloors,jdbcType=VARCHAR},</if>
			<if test="currentPeriod != null">#{currentPeriod,jdbcType=VARCHAR},</if>
			<if test="houseHigh != null">#{houseHigh,jdbcType=VARCHAR},</if>
			<if test="applyFloors != null">#{applyFloors,jdbcType=VARCHAR},</if>
			<if test="houseLayout != null">#{houseLayout,jdbcType=VARCHAR},</if>
			<if test="roomLayout != null">#{roomLayout,jdbcType=VARCHAR},</if>
			<if test="officeLayout != null">#{officeLayout,jdbcType=VARCHAR},</if>
			<if test="wayLayout != null">#{wayLayout,jdbcType=VARCHAR},</if>
			<if test="isExistSymmetry != null">#{isExistSymmetry,jdbcType=VARCHAR},</if>
			<if test="symmetryIds != null">#{symmetryIds,jdbcType=VARCHAR},</if>
			<if test="isMerge != null">#{isMerge,jdbcType=VARCHAR},</if>
			<if test="mergeIds != null">#{mergeIds,jdbcType=VARCHAR},</if>
			<if test="mergeNewId != null">#{mergeNewId,jdbcType=INTEGER},</if>
			<if test="picResId != null">#{picResId,jdbcType=INTEGER},</if>
			<if test="isAll != null">#{isAll,jdbcType=INTEGER},</if>
			<if test="houseCommonCode != null">#{houseCommonCode,jdbcType=VARCHAR},</if>
			<if test="houseTypeCode != null">#{houseTypeCode,jdbcType=VARCHAR},</if>
			<if test="houseTag != null">#{houseTag,jdbcType=VARCHAR},</if>
			<if test="houseStatus != null">#{houseStatus,jdbcType=VARCHAR},</if>
			<if test="dealStatus != null">#{dealStatus,jdbcType=VARCHAR},</if>
			<if test="isReview != null">#{isReview,jdbcType=VARCHAR},</if>
			<if test="att1 != null">#{att1,jdbcType=VARCHAR},</if>
			<if test="areaLongCode != null">#{areaLongCode,jdbcType=VARCHAR},</if>
			<if test="houseKind != null">#{houseKind,jdbcType=VARCHAR},</if>
			<if test="att4 != null">#{att4,jdbcType=VARCHAR},</if>
			<if test="att5 != null">#{att5,jdbcType=VARCHAR},</if>
			<if test="att6 != null">#{att6,jdbcType=VARCHAR},</if>
			<if test="dateAtt1 != null">#{dateAtt1,jdbcType=TIMESTAMP},</if>
			<if test="dateAtt2 != null">#{dateAtt2,jdbcType=TIMESTAMP},</if>
			<if test="resetState != null">#{resetState,jdbcType=INTEGER},</if>
			<if test="numAtt2 != null">#{numAtt2,jdbcType=INTEGER},</if>
			<if test="numAtt3 != null">#{numAtt3,jdbcType=DECIMAL},</if>
			<if test="numAtt4 != null">#{numAtt4,jdbcType=DECIMAL},</if>
			<if test="remark != null">#{remark,jdbcType=VARCHAR},</if>
			<if test="areaCode != null">#{areaCode,jdbcType=VARCHAR},</if>
			<if test="isPublic != null">#{isPublic,jdbcType=INTEGER},</if>
			<if test="houseDoorCode != null">#{houseDoorCode,jdbcType=VARCHAR},</if>
			<if test="houseSpaceNum != null">#{houseSpaceNum,jdbcType=VARCHAR},</if>
			<if test="baseHouseId != null">#{baseHouseId,jdbcType=BIGINT},</if>
			<if test="snapPicId != null">#{snapPicId,jdbcType=BIGINT},</if>
			<if test="origin != null"> #{origin,jdbcType=SMALLINT},</if>
			<if test="restoreFileId != null"> #{restoreFileId,jdbcType=BIGINT},</if>
			<if test="dataType != null">#{dataType,jdbcType=SMALLINT},</if>
			<if test="platformType != null">#{platformType,jdbcType=SMALLINT},</if>
		</trim>
	</insert>
	
	<update id="lockPerfectHouse">
		UPDATE 
		  draw_base_house 
		SET
		  house_status = #{lockStatus},
		  perfect_user_id = #{userId}
		WHERE id = #{houseId}
		  AND house_status = #{limitStatus} 
	</update>

	<select id="getSnapPicPathById" parameterType="long" resultType="java.lang.String">
		SELECT  r.pic_path FROM  base_house b LEFT JOIN res_house_pic r on b.snap_pic_id = r.id where b.id = #{id,jdbcType=BIGINT};
	</select>

	<select id="getDataType" resultType="java.util.Map">
		SELECT
		  origin,
		  data_type dataType
		FROM
		  draw_base_house
		WHERE is_deleted = 0
		  AND id = #{houseId}
	</select>
	
	<update id="restFailTask">
		UPDATE 
		  draw_base_house 
		SET
		  house_status = #{status}
		WHERE is_deleted = 0 
		  AND house_status = 5
		  AND id IN
		  <foreach collection="args" item="item" open="(" separator="," close=")">
			#{item.houseId}
		  </foreach>
	</update>

	<select id="listBaseHouseByDrawHouseId" resultType="java.lang.Long">
	  	SELECT 
		  h.base_house_id
		FROM
		  draw_base_house h
		WHERE is_deleted = 0 
		  AND id IN 
		  <foreach collection="args" item="item" open="(" separator="," close=")">
			#{item.houseId}
		  </foreach>
	</select>
	
	<select id="getBaseHouseInfo" resultType="java.util.Map">
		SELECT 
		  h.id,
		  h.house_name AS houseName,
		  h.base_house_id AS baseHouseId,
		  bl.living_name AS livingName,
		  bl.area_long_code AS areaLongCode
		FROM
		  draw_base_house h 
		  LEFT JOIN base_living bl 
		    ON h.living_id = bl.id 
		WHERE h.is_deleted = 0 
		  AND bl.is_deleted = 0 
		AND h.id = #{houseId}
	</select>
	
	<select id="getUserByPhone" resultType="java.util.Map">
	  SELECT u.id as userId, u.mobile FROM sys_user u WHERE u.is_deleted = 0 AND u.mobile = #{phone} limit 1
	</select>

	<select id="getDrawHouseByBaseHouseId" resultType="com.sandu.api.house.model.DrawBaseHouse">
		SELECT
		  *
		FROM
		  draw_base_house h
		WHERE h.is_deleted = 0
		  AND h.base_house_id = #{baseHouseId}
		LIMIT 1
	</select>

	<select id="get" resultType="com.sandu.api.house.model.DrawBaseHouse">
		SELECT
		  *
		FROM
		  draw_base_house h
		WHERE h.id = #{id}
	</select>

	<update id="fix2_3Task">
		UPDATE
		  draw_base_house h
		SET
		  h.house_status = 6
		WHERE h.id IN
		<foreach collection="failTasks" item="item" open="(" separator="," close=")">
			#{item.houseId}
		</foreach>
	</update>

	<update id="resetDrawHouse">
		UPDATE draw_base_house h SET h.house_status = #{houseStatus} WHERE h.id IN
		<foreach collection="houseIds" item="item" open="(" separator="," close=")">
			#{item}
		</foreach>
	</update>

	<update id="batchResetFixHouse">
		UPDATE draw_base_house h SET h.bugfix_status = #{bugfixStatus} WHERE h.id IN
		<foreach collection="houseIds" item="item" open="(" separator=","  close=")">
			#{item}
		</foreach>
	</update>
</mapper>