<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sandu.service.company.dao.BaseCompanyMapper">
    <select id="listCompany" resultType="com.sandu.api.company.model.BaseCompany">
        SELECT DISTINCT
          c.id,
          c.company_name
        FROM
          sys_user u,
          sys_user_role ur,
          sys_role r,
          base_company c
        WHERE u.id = ur.user_id
          AND ur.role_id = r.id
          AND c.id = u.business_administration_id
          AND u.is_deleted = 0
          AND ur.is_deleted = 0
          AND r.is_deleted = 0
          AND c.is_deleted = 0
          AND r.code = 'INTERNAL_HOUSE_DRAW'
        ORDER BY c.id;
    </select>
</mapper>