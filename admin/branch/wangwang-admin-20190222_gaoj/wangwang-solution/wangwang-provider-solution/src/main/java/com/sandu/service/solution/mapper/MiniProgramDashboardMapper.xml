<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sandu.service.solution.dao.MiniProgramDashboardMapper">

    <insert id="createMiniProgramDashboard" parameterType="com.sandu.api.solution.model.MiniProgramDashboard"  useGeneratedKeys="true" keyProperty="id">
        insert into miniprogram_dashboard_config
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="appId!= null">app_id, </if>
            <if test="appName!= null">app_name, </if>
            <if test="config!= null">dashboard_config, </if>
            <if test="creator!= null">creator, </if>
            <if test="gmtCreate!= null">gmt_create, </if>
            <if test="modifier!= null">modifier, </if>
            <if test="gmtModified!= null">gmt_modified, </if>
            <if test="isDeleted!= null">is_deleted, </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="appId!= null">  #{appId,jdbcType=INTEGER}, </if>
            <if test="appName!= null">  #{appName,jdbcType=VARCHAR}, </if>
            <if test="config!= null">  #{config,jdbcType=INTEGER}, </if>
            <if test="creator!= null">  #{creator,jdbcType=VARCHAR}, </if>
            <if test="gmtCreate!= null">  #{gmtCreate,jdbcType=TIMESTAMP}, </if>
            <if test="modifier!= null">  #{modifier,jdbcType=VARCHAR}, </if>
            <if test="gmtModified!= null">  #{gmtModified,jdbcType=TIMESTAMP}, </if>
            <if test="isDeleted!= null">  #{isDeleted,jdbcType=INTEGER}, </if>
        </trim>
    </insert>

    <update id="updateMiniProgramDashboard" parameterType="com.sandu.api.solution.model.MiniProgramDashboard">
        update miniprogram_dashboard_config
        <set>
            <if test="config!= null">  dashboard_config = #{config,jdbcType=VARCHAR}, </if>
            <if test="creator!= null">  creator = #{creator,jdbcType=VARCHAR}, </if>
            <if test="gmtCreate!= null">  gmt_create = #{gmtCreate,jdbcType=TIMESTAMP}, </if>
            <if test="modifier!= null">  modifier = #{modifier,jdbcType=VARCHAR}, </if>
            <if test="gmtModified!= null">  gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}, </if>
            <if test="isDeleted!= null">  is_deleted = #{isDeleted,jdbcType=INTEGER}, </if>
        </set>
        where app_id = #{appId,jdbcType=VARCHAR}
    </update>


    <resultMap id="AllResultMap" type="com.sandu.api.solution.model.MiniProgramDashboard">
        <id column="id" property="id" jdbcType="INTEGER" />
        <result  column="app_id" property="appId" jdbcType="VARCHAR" />
        <result  column="app_name" property="appName" jdbcType="VARCHAR" />
        <result  column="dashboard_config" property="config" jdbcType="VARCHAR" />
        <result  column="creator" property="creator" jdbcType="VARCHAR" />
        <result  column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
        <result  column="modifier" property="modifier" jdbcType="VARCHAR" />
        <result  column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
        <result  column="is_deleted" property="isDeleted" jdbcType="INTEGER" />

    </resultMap>

    <select id="getMiniProgramDashboardByAppId"  resultType="com.sandu.api.solution.model.MiniProgramDashboard"
            parameterType="java.lang.String">
        select
          id          AS id,
          app_id      AS appId,
          app_name    AS appName,
          dashboard_config AS config
        from miniprogram_dashboard_config
        where is_deleted= 0
              AND app_id = #{appId,jdbcType=VARCHAR}
    </select>

</mapper>