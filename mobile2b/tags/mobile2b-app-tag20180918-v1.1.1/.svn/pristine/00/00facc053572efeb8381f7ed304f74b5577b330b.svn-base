<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nork.design.dao.OptimizePlanMapper">
	<select id="countOnekeyPlan" resultType="java.lang.Integer"
		parameterType="com.nork.design.model.DesignPlan">
		select count(1)
			from onekey_decoration_design_plan
		where design_template_id = #{designTemplateId,jdbcType=INTEGER}
		and recommended_plan_id = #{recommendedPlanId,jdbcType=INTEGER}
		and is_parent = 1
		and is_deleted = 0
	</select>
	
	<select id="getDesignPlanByRecomendPlanIdAndTPId"  resultMap="AllResultMap"
		parameterType="java.lang.Integer">
		select 
	<include refid="All_Column_List" />
			from onekey_decoration_design_plan
		where design_template_id = #{designTemplateId,jdbcType=INTEGER}
		and recommended_plan_id = #{recommendedPlanId,jdbcType=INTEGER}
		and is_parent = 1
		and is_deleted = 0 
		LIMIT 1
	</select>
	
	<insert id="insertDesignPlanOnekey" parameterType="com.nork.design.model.DesignPlan"  useGeneratedKeys="true" keyProperty="id">
		insert into onekey_decoration_design_plan
		<trim prefix="(" suffix=")" suffixOverrides=",">
		<if test="planCode!= null">plan_code, </if>
		<if test="planName!= null">plan_name, </if>
		<if test="planSource!= null">plan_source, </if>
		<if test="houseId!= null">house_id, </if>
		<if test="livingId!= null">living_id, </if>
		<if test="residentialUnitsName!= null">residential_units_name,</if>
		<if test="userId!= null">user_id, </if>
		<if test="mediaType!= null">media_type, </if>
		<if test="designSourceType!= null">design_source_type, </if>
		<if test="designId!= null">design_id, </if>
		<if test="designTemplateId!= null">design_template_id, </if>
		<if test="recommendedPlanId!= null">recommended_plan_id, </if>
		<if test="designStyleId!= null">design_style_id, </if>
		<if test="picId!= null">pic_id, </if>
		<if test="modelId!= null">model_id, </if>
		<if test="model3dId!= null">model_3d_id, </if>
		<if test="modelU3dId!= null">model_u3d_id, </if>
		<if test="webModelU3dId!= null">web_model_u3d_id, </if>
		<if test="iosModelU3dId!= null">ios_model_u3d_id, </if>
		<if test="ipadModelU3dId!= null">ipad_model_u3d_id, </if>
		<if test="pcModelU3dId!= null">pc_model_u3d_id, </if>
		<if test="androidModelU3dId!= null">android_model_u3d_id, </if>
		<if test="macBookpcModelU3dId!= null">macBookpc_model_u3d_id, </if>
		<if test="configFileId!= null">config_file_id, </if>
		<if test="planDesc!= null">plan_desc, </if>
		<if test="spaceCommonId!= null">space_common_id, </if>
		<if test="sysCode!= null">sys_code, </if>
		<if test="creator!= null">creator, </if>
		<if test="gmtCreate!= null">gmt_create, </if>
		<if test="modifier!= null">modifier, </if>
		<if test="gmtModified!= null">gmt_modified, </if>
		<if test="isDeleted!= null">is_deleted, </if>
		<if test="remark!= null">remark, </if>
		<!--<if test="eveningFileId!= null">evening_file_id, </if>
		<if test="dawnFileId!= null">dawn_file_id, </if>
		<if test="nightFileId!= null">night_file_id, </if>-->
		<if test="shareTotal!= null">share_total, </if>
		<if test="isOpen!= null">is_open, </if>
		<if test="isChange!= null">is_change, </if>
		<if test="isDecorated!= null">is_decorated, </if>
		<if test="draftState!= null">draft_state, </if>
		<if test="baiMoState!= null">baiMo_state, </if>
		<if test="stuffFinishState!= null">stuff_finish_state, </if>
		<if test="decorateFinishState!= null">decorate_finish_state, </if>

		
		<if test="coverPicId!= null">cover_pic_Id, </if>
<!-- 		<if test="isRelease!= null">is_release, </if> -->
		<if test="releaseTime!= null">release_time, </if>
		<if test="designRecommendedStyleId!= null">design_recommended_style_id, </if>
		
		<if test="isRecommended!= null">is_recommended, </if>
		<if test="isDefaultDecorate!= null">is_default_decorate, </if>
		<if test="planNumber!= null">plan_number, </if>
		<if test="designSceneId!= null">design_scene_id, </if>
		<if test="visible!= null">visible, </if>
		<if test="sceneModified!= null">scene_modified,</if>
		<if test="isParent!= null">is_parent,</if>

		
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
		<if test="planCode!= null">  #{planCode,jdbcType=VARCHAR}, </if>
		<if test="planName!= null">  #{planName,jdbcType=VARCHAR}, </if>
		<if test="planSource!= null"> #{planSource,jdbcType=VARCHAR},</if>
		<if test="houseId!= null">  #{houseId,jdbcType=INTEGER}, </if>
		<if test="livingId!= null">  #{livingId,jdbcType=INTEGER}, </if>
		<if test="residentialUnitsName!= null">#{residentialUnitsName,jdbcType=VARCHAR},</if>
		<if test="userId!= null">  #{userId,jdbcType=INTEGER}, </if>
		<if test="mediaType!= null">  #{mediaType,jdbcType=INTEGER}, </if>
		<if test="designSourceType!= null">  #{designSourceType,jdbcType=INTEGER}, </if>
		<if test="designId!= null">  #{designId,jdbcType=INTEGER}, </if>
		<if test="designTemplateId!= null">  #{designTemplateId,jdbcType=INTEGER}, </if>
		<if test="recommendedPlanId!= null">  #{recommendedPlanId,jdbcType=INTEGER}, </if>
		<if test="designStyleId!= null">  #{designStyleId,jdbcType=INTEGER}, </if>
		<if test="picId!= null">  #{picId,jdbcType=INTEGER}, </if>
		<if test="modelId!= null">  #{modelId,jdbcType=INTEGER}, </if>
		<if test="model3dId!= null">  #{model3dId,jdbcType=INTEGER}, </if>
		<if test="modelU3dId!= null">  #{modelU3dId,jdbcType=INTEGER}, </if>
		<if test="webModelU3dId!= null">  #{webModelU3dId,jdbcType=INTEGER}, </if>
		<if test="iosModelU3dId!= null">  #{iosModelU3dId,jdbcType=INTEGER}, </if>
		<if test="ipadModelU3dId!= null">  #{ipadModelU3dId,jdbcType=INTEGER}, </if>
		<if test="pcModelU3dId!= null">  #{pcModelU3dId,jdbcType=INTEGER}, </if>
		<if test="androidModelU3dId!= null">  #{androidModelU3dId,jdbcType=INTEGER}, </if>
		<if test="macBookpcModelU3dId!= null">  #{macBookpcModelU3dId,jdbcType=INTEGER}, </if>
		<if test="configFileId!= null">  #{configFileId,jdbcType=INTEGER}, </if>
		<if test="spaceCommonId!= null">  #{spaceCommonId,jdbcType=INTEGER}, </if>
		<if test="planDesc!= null">  #{planDesc,jdbcType=VARCHAR}, </if>
		<if test="sysCode!= null">  #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="remark!= null">  #{remark,jdbcType=VARCHAR}, </if>
		<!--<if test="eveningFileId!= null">  #{eveningFileId,jdbcType=INTEGER}, </if>
		<if test="dawnFileId!= null">  #{dawnFileId,jdbcType=INTEGER}, </if>
		<if test="nightFileId!= null">  #{nightFileId,jdbcType=INTEGER}, </if>-->
		<if test="shareTotal!= null">#{shareTotal,jdbcType=INTEGER}, </if>
		<if test="isOpen!= null">#{isOpen,jdbcType=INTEGER}, </if>
		<if test="isChange!= null">#{isChange,jdbcType=INTEGER}, </if>
		<if test="isDecorated!= null">#{isDecorated,jdbcType=INTEGER}, </if>
		<if test="draftState!= null">#{draftState,jdbcType=INTEGER}, </if>
		<if test="baiMoState!= null">#{baiMoState,jdbcType=INTEGER}, </if>
		<if test="stuffFinishState!= null">#{stuffFinishState,jdbcType=INTEGER}, </if>
		<if test="decorateFinishState!= null">#{decorateFinishState,jdbcType=INTEGER}, </if>
 
		
		<if test="coverPicId!= null">#{coverPicId,jdbcType=INTEGER}, </if>
<!-- 		<if test="isRelease!= null">#{isRelease,jdbcType=INTEGER}, </if> -->
		<if test="releaseTime!= null">#{releaseTime,jdbcType=TIMESTAMP}, </if>
		<if test="designRecommendedStyleId!= null">#{designRecommendedStyleId,jdbcType=INTEGER}, </if>
		
 		<if test="isRecommended!= null">#{isRecommended,jdbcType=INTEGER}, </if>
		<if test="isDefaultDecorate!= null">#{isDefaultDecorate,jdbcType=INTEGER}, </if>
		<if test="planNumber!= null">#{planNumber,jdbcType=VARCHAR}, </if>

		<if test="designSceneId!= null">#{designSceneId,jdbcType=INTEGER}, </if>
		<if test="visible!= null">#{visible,jdbcType=INTEGER}, </if>
		<if test="sceneModified!= null">#{sceneModified,jdbcType=INTEGER}, </if>
		<if test="isParent!= null">#{isParent,jdbcType=INTEGER}, </if>
		</trim>
	</insert>
	<!-- **更新定义** -->
	<update id="updateByPrimaryKeyPlan" parameterType="com.nork.design.model.DesignPlan">
		update onekey_decoration_design_plan
		<set>
		<if test="planCode!= null">  plan_code = #{planCode,jdbcType=VARCHAR}, </if>
		<if test="planName!= null">  plan_name = #{planName,jdbcType=VARCHAR}, </if>
		<if test="userId!= null">  user_id = #{userId,jdbcType=INTEGER}, </if>
		<if test="mediaType!= null">  media_type = #{mediaType,jdbcType=INTEGER}, </if>
		<if test="designSourceType!= null">  design_source_type = #{designSourceType,jdbcType=INTEGER}, </if>
		<if test="designId!= null">  design_id = #{designId,jdbcType=INTEGER}, </if>
		<if test="designTemplateId!= null">  design_template_id = #{designTemplateId,jdbcType=INTEGER}, </if>
		<if test="designStyleId!= null">  design_style_id = #{designStyleId,jdbcType=INTEGER}, </if>
		<if test="picId!= null">  pic_id = #{picId,jdbcType=INTEGER}, </if>
		<if test="modelId!= null">  model_id = #{modelId,jdbcType=INTEGER}, </if>
		<if test="model3dId!= null">  model_3d_id = #{model3dId,jdbcType=INTEGER}, </if>
		<if test="modelU3dId!= null">  model_u3d_id = #{modelU3dId,jdbcType=INTEGER}, </if>
		<if test="webModelU3dId!= null">  web_model_u3d_id = #{webModelU3dId,jdbcType=INTEGER}, </if>
		<if test="iosModelU3dId!= null">  ios_model_u3d_id = #{iosModelU3dId,jdbcType=INTEGER}, </if>
		<if test="pcModelU3dId!= null">  pc_model_u3d_id = #{pcModelU3dId,jdbcType=INTEGER}, </if>
		<if test="ipadModelU3dId!= null">  ipad_model_u3d_id = #{ipadModelU3dId,jdbcType=INTEGER}, </if>
		<if test="androidModelU3dId!= null">  android_model_u3d_id = #{androidModelU3dId,jdbcType=INTEGER}, </if>
		<if test="macBookpcModelU3dId!= null">  macBookpc_model_u3d_id = #{macBookpcModelU3dId,jdbcType=INTEGER}, </if>
		<if test="configFileId!= null">  config_file_id = #{configFileId,jdbcType=INTEGER}, </if>
		<if test="spaceCommonId!= null">  space_common_id = #{spaceCommonId,jdbcType=INTEGER}, </if>
		<if test="planDesc!= null">  plan_desc = #{planDesc,jdbcType=VARCHAR}, </if>
		<if test="sysCode!= null">  sys_code = #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  creator = #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  gmt_create = #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  modifier = #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  is_deleted = #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="remark!= null">  remark = #{remark,jdbcType=VARCHAR}, </if>
		<!--<if test="eveningFileId!= null">  evening_file_id = #{eveningFileId,jdbcType=INTEGER}, </if>
		<if test="dawnFileId!= null">  dawn_file_id = #{dawnFileId,jdbcType=INTEGER}, </if>
		<if test="nightFileId!= null">  night_file_id = #{nightFileId,jdbcType=INTEGER}, </if>-->
		<if test="shareTotal!= null">  share_total = #{shareTotal,jdbcType=INTEGER}, </if>
		<if test="isOpen!= null">  is_open = #{isOpen,jdbcType=INTEGER}, </if>
		<if test="isChange!= null">  is_change = #{isChange,jdbcType=INTEGER}, </if>
		<if test="isDecorated!= null">  is_decorated = #{isDecorated,jdbcType=INTEGER}, </if>
		<if test="isDecorated!= null">  is_decorated = #{isDecorated,jdbcType=INTEGER}, </if>
		<if test="draftState!= null">  draft_state = #{draftState,jdbcType=INTEGER}, </if>
		<if test="baiMoState!= null">  baiMo_state = #{baiMoState,jdbcType=INTEGER}, </if>
		<if test="stuffFinishState!= null">  stuff_finish_state = #{stuffFinishState,jdbcType=INTEGER}, </if>
		<if test="decorateFinishState!= null">  decorate_finish_state = #{decorateFinishState,jdbcType=INTEGER}, </if>
 

		<if test="coverPicId!= null">cover_pic_Id = #{coverPicId,jdbcType=INTEGER}, </if>
<!-- 		<if test="isRelease!= null">is_release = #{isRelease,jdbcType=INTEGER}, </if> -->
		<if test="releaseTime!= null">release_time =#{releaseTime,jdbcType=TIMESTAMP}, </if>
		<if test="designRecommendedStyleId!= null">design_recommended_style_id = #{designRecommendedStyleId,jdbcType=INTEGER}, </if>
		
		<if test="effectsConfig!= null">effects_config = #{effectsConfig,jdbcType=VARCHAR}, </if>
		
		<if test="isRecommended!= null">is_recommended = #{isRecommended,jdbcType=INTEGER}, </if>
		<if test="isDefaultDecorate!= null">is_default_decorate = #{isDefaultDecorate,jdbcType=INTEGER}, </if>
		<if test="planNumber!= null">plan_number = #{planNumber,jdbcType=VARCHAR}, </if>

		<if test="designSceneId!= null">design_scene_id = #{designSceneId,jdbcType=INTEGER}, </if>
		<if test="visible!= null">visible = #{visible,jdbcType=INTEGER}, </if>
		<if test="sceneModified!= null and sceneModified > 0 ">scene_modified = #{sceneModified,jdbcType=INTEGER}, </if>
		<if test="isParent!= null"> is_parent = #{isParent,jdbcType=INTEGER} </if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<insert id="insertDesignPlanProductOnekey" parameterType="com.nork.design.model.DesignPlanProduct"  useGeneratedKeys="true" keyProperty="id">
		insert into onekey_decoration_design_plan_product
		<trim prefix="(" suffix=")" suffixOverrides=",">
		<if test="sysCode!= null">sys_code, </if>
		<if test="splitTexturesChooseInfo!= null">split_textures_choose_info, </if>
		<if test="planGroupId!= null">plan_group_id, </if>
		<if test="creator!= null">creator, </if>
		<if test="gmtCreate!= null">gmt_create, </if>
		<if test="modifier!= null">modifier, </if>
		<if test="gmtModified!= null">gmt_modified, </if>
		<if test="isDeleted!= null">is_deleted, </if>
		<if test="groupType!= null">group_type, </if>
		<if test="modelProductId!= null">model_product_id, </if>
		<if test="planId!= null">plan_id, </if>
		<if test="isDirty!= null">is_dirty, </if>
		<if test="productId!= null">product_id, </if>
		<if test="initProductId!= null">init_product_id, </if>
		<if test="locationFileId!= null">location_file_id, </if>
		<if test="productSequence!= null">product_sequence, </if>
		<if test="materialPicId!= null">material_pic_id, </if>
		<if test="att2!= null">att2, </if>
		<if test="att3!= null">att3, </if>
		<if test="att4!= null">att4, </if>
		<if test="att5!= null">att5, </if>
		<if test="att6!= null">att6, </if>
		<if test="dateAtt1!= null">date_att1, </if>
		<if test="dateAtt2!= null">date_att2, </if>
		<if test="planProductId!= null">planProduct_id, </if>
		<if test="displayStatus!= null">display_status, </if>
		<if test="numAtt3!= null">num_att3, </if>
		<if test="numAtt4!= null">num_att4, </if>
		<if test="remark!= null">remark, </if>
		<if test="isHide!= null">is_hide, </if>
		<if test="posIndexPath!= null">pos_index_path, </if>
		<if test="productGroupId!= null">product_group_id, </if>
		<if test="isMainProduct!= null">is_main_product, </if>
		<if test="posName!= null">pos_name, </if>
		<if test="bindParentProductId!= null">bind_parent_productId, </if>
		<if test="sameProductTypeIndex!= null">same_product_type_index ,</if>
		
		<if test="isStandard!= null">is_standard, </if>
		<if test="center!= null and center!='' ">center, </if>
		<if test="regionMark!= null and regionMark!='' ">region_mark, </if>
		<if test="styleId!= null">style_id, </if>
		<if test="measureCode!= null and measureCode!='' ">measure_code, </if>
		<if test="describeInfo!= null and describeInfo!=''">describe_info, </if>
		<if test="productIndex!= null">product_index, </if>
		
		<if test="isMainStructureProduct!= null">is_main_structure_product, </if>
		<if test="isGroupReplaceWay!= null">is_group_replace_way, </if>
		<if test="wallOrientation!= null">wall_orientation, </if>
		<if test="wallType!= null">wall_type, </if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
		<if test="sysCode!= null">  #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="splitTexturesChooseInfo!= null">  #{splitTexturesChooseInfo,jdbcType=VARCHAR}, </if>
		<if test="planGroupId!= null">  #{planGroupId,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="groupType!= null">  #{groupType,jdbcType=INTEGER}, </if>
		<if test="modelProductId!= null">  #{modelProductId,jdbcType=INTEGER}, </if>
		<if test="planId!= null">  #{planId,jdbcType=INTEGER}, </if>
		<if test="isDirty!= null">  #{isDirty,jdbcType=INTEGER}, </if>
		<if test="productId!= null">  #{productId,jdbcType=INTEGER}, </if>
		<if test="initProductId!= null">  #{initProductId,jdbcType=INTEGER}, </if>
		<if test="locationFileId!= null">  #{locationFileId,jdbcType=INTEGER}, </if>
		<if test="productSequence!= null">  #{productSequence,jdbcType=VARCHAR}, </if>
		<if test="materialPicId!= null">  #{materialPicId,jdbcType=VARCHAR}, </if>
		<if test="att2!= null">  #{att2,jdbcType=VARCHAR}, </if>
		<if test="att3!= null">  #{att3,jdbcType=VARCHAR}, </if>
		<if test="att4!= null">  #{att4,jdbcType=VARCHAR}, </if>
		<if test="att5!= null">  #{att5,jdbcType=VARCHAR}, </if>
		<if test="att6!= null">  #{att6,jdbcType=VARCHAR}, </if>
		<if test="dateAtt1!= null">  #{dateAtt1,jdbcType=TIMESTAMP}, </if>
		<if test="dateAtt2!= null">  #{dateAtt2,jdbcType=TIMESTAMP}, </if>
		<if test="planProductId!= null">  #{planProductId,jdbcType=INTEGER}, </if>
		<if test="displayStatus!= null">  #{displayStatus,jdbcType=INTEGER}, </if>
		<if test="numAtt3!= null">  #{numAtt3,jdbcType=DOUBLE}, </if>
		<if test="numAtt4!= null">  #{numAtt4,jdbcType=DOUBLE}, </if>
		<if test="remark!= null">  #{remark,jdbcType=VARCHAR}, </if>
		<if test="isHide!= null">  #{isHide,jdbcType=INTEGER}, </if>
		<if test="posIndexPath!= null">  #{posIndexPath,jdbcType=VARCHAR}, </if>
		<if test="productGroupId!= null">#{productGroupId,jdbcType=INTEGER}, </if>
		<if test="isMainProduct!= null">#{isMainProduct,jdbcType=INTEGER}, </if>
		<if test="posName!= null">#{posName,jdbcType=VARCHAR}, </if>
		<if test="bindParentProductId!= null">  #{bindParentProductId,jdbcType=VARCHAR}, </if>
		<if test="sameProductTypeIndex!= null">  #{sameProductTypeIndex,jdbcType=INTEGER}, </if>
		
		<if test="isStandard!= null">#{isStandard,jdbcType=INTEGER}, </if>
		<if test="center!= null and center!='' ">#{center,jdbcType=VARCHAR}, </if>
		<if test="regionMark!= null and regionMark!='' ">#{regionMark,jdbcType=VARCHAR}, </if>
		<if test="styleId!= null">#{styleId,jdbcType=INTEGER}, </if>
		<if test="measureCode!= null and measureCode!='' ">#{measureCode,jdbcType=VARCHAR}, </if>
		<if test="describeInfo!= null and describeInfo!=''">#{describeInfo,jdbcType=VARCHAR}, </if>
		<if test="productIndex!= null">#{productIndex,jdbcType=INTEGER}, </if>
		<if test="isMainStructureProduct!= null">#{isMainStructureProduct,jdbcType=INTEGER}, </if>
		<if test="isGroupReplaceWay!= null">#{isGroupReplaceWay,jdbcType=INTEGER}, </if>
		<if test="wallOrientation!= null">#{wallOrientation,jdbcType=VARCHAR}, </if>
		<if test="wallType!= null">#{wallType,jdbcType=VARCHAR}, </if>
		</trim>
	</insert>
	
	<insert id="insertResDesignOnekey" parameterType="com.nork.system.model.ResDesign"  useGeneratedKeys="true" keyProperty="id">
		insert into onekey_decoration_res_design
		<trim prefix="(" suffix=")" suffixOverrides=",">
		<if test="oldId!= null ">old_id, </if>
		<if test="fileCode!= null  and  fileCode!=''">file_code, </if>
		<if test="fileName!= null and fileName!='' ">file_name, </if>
		<if test="fileOriginalName!= null and fileOriginalName!='' ">file_original_name, </if>
		<if test="fileType!= null and fileType!='' ">file_type, </if>
		<if test="fileSize!= null and fileSize!='' ">file_size, </if>
		<if test="fileWeight!= null and fileWeight!='' ">file_weight, </if>
		<if test="fileHigh!= null and  fileHigh!='' ">file_high, </if>
		<if test="fileLength!= null">file_length, </if>
		<if test="fileSuffix!= null and fileSuffix!=''  ">file_suffix, </if>
		<if test="fileFormat!= null and fileFormat!='' ">file_format, </if>
		<if test="fileLevel!= null and fileLevel!='' ">file_level, </if>
		<if test="filePath!= null and filePath!='' ">file_path, </if>
		<if test="fileDesc!= null and  fileDesc!='' ">file_desc, </if>
		<if test="fileOrdering!= null">file_ordering, </if>
		<if test="sysCode!= null and sysCode!='' "> sys_code, </if>
		<if test="creator!= null and creator!='' ">creator, </if>
		<if test="gmtCreate!= null">gmt_create, </if>
		<if test="modifier!= null and modifier!='' ">modifier, </if>
		<if test="gmtModified!= null">gmt_modified, </if>
		<if test="isDeleted!= null">is_deleted, </if>
		<if test="fileKey!= null and  fileKey!='' ">file_key, </if>
		<if test="businessId!= null">business_id, </if>
		
		<if test="smallPicInfo!= null and smallPicInfo!='' ">small_pic_info, </if>
		<if test="viewPoint!= null">view_point, </if>
		<if test="scene!= null">scene, </if>
		<if test="sequence!= null">sequence, </if>
		<if test="renderingType!= null">rendering_type, </if>
		<if test="panoPath!= null and  panoPath!='' ">pano_path, </if>
		<if test="minHeight!= null">min_height, </if>
		<if test="isModelShare!= null">is_model_share, </if>
		
		<if test="att1!= null and  att1!='' ">att1, </if>
		<if test="att2!= null and att2!='' ">att2, </if>
		<if test="att3!= null and att3!='' ">att3, </if>
		<if test="att4!= null and att4!='' ">att4, </if>
		<if test="att5!= null and att5!='' ">att5, </if>
		<if test="att6!= null and att6!='' ">att6, </if>
		<if test="numa1!= null">numa1, </if>
		<if test="numa2!= null">numa2, </if>
		<if test="numa3!= null">numa3, </if>
		<if test="numa4!= null">numa4, </if>
		<if test="numa5!= null">numa5, </if>
		<if test="numa6!= null">numa6, </if>
		<if test="remark!= null">remark, </if>
		<if test="isParent!= null">is_parent, </if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
		<if test="oldId!= null">#{oldId,jdbcType=INTEGER}, </if>
		<if test="fileCode!= null and fileCode!='' "> #{fileCode,jdbcType=VARCHAR}, </if>
		<if test="fileName!= null and fileName!= '' "> #{fileName,jdbcType=VARCHAR}, </if>
		<if test="fileOriginalName!= null and fileOriginalName!= '' ">#{fileOriginalName,jdbcType=VARCHAR}, </if>
		<if test="fileType!= null and fileType!='' "> #{fileType,jdbcType=VARCHAR}, </if>
		<if test="fileSize!= null and fileSize!= '' ">#{fileSize,jdbcType=VARCHAR}, </if>
		<if test="fileWeight!= null and fileWeight!='' "> #{fileWeight,jdbcType=VARCHAR}, </if>
		<if test="fileHigh!= null and fileHigh!= '' "> #{fileHigh,jdbcType=VARCHAR}, </if>
		<if test="fileLength!= null"> #{fileLength,jdbcType=INTEGER}, </if>
		<if test="fileSuffix!= null and fileSuffix!= '' "> #{fileSuffix,jdbcType=VARCHAR}, </if>
		<if test="fileFormat!= null and fileFormat!= '' ">#{fileFormat,jdbcType=VARCHAR}, </if>
		<if test="fileLevel!= null and fileLevel!= '' "> #{fileLevel,jdbcType=VARCHAR}, </if>
		<if test="filePath!= null and filePath!= '' "> #{filePath,jdbcType=VARCHAR}, </if>
		<if test="fileDesc!= null and fileDesc!='' ">#{fileDesc,jdbcType=VARCHAR}, </if>
		<if test="fileOrdering!= null"> #{fileOrdering,jdbcType=INTEGER}, </if>
		<if test="sysCode!= null  and sysCode!='' "> #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null and creator!= '' ">#{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null"> #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null and modifier!= '' ">#{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null"> #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">#{isDeleted,jdbcType=VARCHAR}, </if>
		<if test="fileKey!= null and fileKey!= '' "> #{fileKey,jdbcType=VARCHAR}, </if>
		<if test="businessId!= null"> #{businessId,jdbcType=INTEGER}, </if>
		
		<if test="smallPicInfo!= null and smallPicInfo!= '' "> #{smallPicInfo,jdbcType=VARCHAR}, </if>
		<if test="viewPoint!= null">  #{viewPoint,jdbcType=INTEGER}, </if>
		<if test="scene!= null">#{scene,jdbcType=INTEGER}, </if>
		<if test="sequence!= null">  #{sequence,jdbcType=INTEGER}, </if>
		<if test="renderingType!= null">  #{renderingType,jdbcType=INTEGER}, </if>
		<if test="panoPath!= null and panoPath!= '' "> #{panoPath,jdbcType=VARCHAR}, </if>
		<if test="minHeight!= null">  #{minHeight,jdbcType=INTEGER}, </if>
		<if test="isModelShare!= null">  #{isModelShare,jdbcType=INTEGER}, </if>
		
		<if test="att1!= null and att1!='' ">  #{att1,jdbcType=VARCHAR}, </if>
		<if test="att2!= null and att2!='' ">  #{att2,jdbcType=VARCHAR}, </if>
		<if test="att3!= null and att3!='' "> #{att3,jdbcType=VARCHAR}, </if>
		<if test="att4!= null and att4!='' "> #{att4,jdbcType=VARCHAR}, </if>
		<if test="att5!= null and att5!='' "> #{att5,jdbcType=VARCHAR}, </if>
		<if test="att6!= null and att6!='' "> #{att6,jdbcType=VARCHAR}, </if>
		<if test="numa1!= null"> #{numa1,jdbcType=INTEGER}, </if>
		<if test="numa2!= null"> #{numa2,jdbcType=INTEGER}, </if>
		<if test="numa3!= null"> #{numa3,jdbcType=INTEGER}, </if>
		<if test="numa4!= null">  #{numa4,jdbcType=INTEGER}, </if>
		<if test="numa5!= null">  #{numa5,jdbcType=INTEGER}, </if>
		<if test="numa6!= null"> #{numa6,jdbcType=INTEGER}, </if>
		<if test="remark!= null">  #{remark,jdbcType=VARCHAR}, </if>
		<if test="isParent!= null">  #{isParent,jdbcType=VARCHAR}, </if>
		</trim>
	</insert>
	<!-- **更新定义** -->
	<update id="updateByPrimaryKeyRes" parameterType="com.nork.system.model.ResDesign">
		update onekey_decoration_res_design
		<set>
		gmt_modified = now(),
		<if test="oldId!= null">old_id = #{oldId,jdbcType=INTEGER}, </if>
		<if test="fileCode!= null">file_code = #{fileCode,jdbcType=VARCHAR}, </if>
		<if test="fileName!= null">file_name = #{fileName,jdbcType=VARCHAR}, </if>
		<if test="fileOriginalName!= null">file_original_name = #{fileOriginalName,jdbcType=VARCHAR}, </if>
		<if test="fileType!= null">file_type = #{fileType,jdbcType=VARCHAR}, </if>
		<if test="fileSize!= null">file_size = #{fileSize,jdbcType=VARCHAR}, </if>
		<if test="fileWeight!= null">file_weight= #{fileWeight,jdbcType=VARCHAR}, </if>
		<if test="fileHigh!= null">file_high= #{fileHigh,jdbcType=VARCHAR}, </if>
		<if test="fileLength!= null">file_length= #{fileLength,jdbcType=INTEGER}, </if>
		<if test="fileSuffix!= null">file_suffix= #{fileSuffix,jdbcType=VARCHAR}, </if>
		<if test="fileFormat!= null">file_format= #{fileFormat,jdbcType=VARCHAR}, </if>
		<if test="fileLevel!= null">file_level= #{fileLevel,jdbcType=VARCHAR}, </if>
		<if test="filePath!= null">file_path= #{filePath,jdbcType=VARCHAR}, </if>
		<if test="fileDesc!= null">file_desc= #{fileDesc,jdbcType=VARCHAR}, </if>
		<if test="fileOrdering!= null">file_ordering= #{fileOrdering,jdbcType=INTEGER}, </if>
		<if test="sysCode!= null"> sys_code= #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">creator= #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">gmt_create= #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">modifier= #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">gmt_modified= #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">is_deleted= #{isDeleted,jdbcType=VARCHAR}, </if>
		<if test="fileKey!= null">file_key= #{fileKey,jdbcType=VARCHAR}, </if>
		<if test="businessId!= null">business_id= #{businessId,jdbcType=INTEGER}, </if>
		
		<if test="smallPicInfo!= null"> small_pic_info= #{smallPicInfo,jdbcType=VARCHAR}, </if>
		<if test="viewPoint!= null"> view_point= #{viewPoint,jdbcType=INTEGER}, </if>
		<if test="scene!= null"> scene= #{scene,jdbcType=INTEGER}, </if>
		<if test="sequence!= null"> sequence= #{sequence,jdbcType=INTEGER}, </if>
		<if test="renderingType!= null"> rendering_type= #{renderingType,jdbcType=INTEGER}, </if>
		<if test="panoPath!= null"> pano_path= #{panoPath,jdbcType=VARCHAR}, </if>
		<if test="minHeight!= null"> min_height= #{minHeight,jdbcType=INTEGER}, </if>
		<if test="isModelShare!= null"> is_model_share= #{isModelShare,jdbcType=INTEGER}, </if>
		
		<if test="att1!= null"> att1 = #{att1,jdbcType=VARCHAR}, </if>
		<if test="att2!= null"> att2 = #{att2,jdbcType=VARCHAR}, </if>
		<if test="att3!= null"> att3 = #{att3,jdbcType=VARCHAR}, </if>
		<if test="att4!= null"> att4 = #{att4,jdbcType=VARCHAR}, </if>
		<if test="att5!= null"> att5 = #{att5,jdbcType=VARCHAR}, </if>
		<if test="att6!= null"> att6 = #{att6,jdbcType=VARCHAR}, </if>
		<if test="numa1!= null"> numa1 = #{numa1,jdbcType=INTEGER}, </if>
		<if test="numa2!= null"> numa2 = #{numa2,jdbcType=INTEGER}, </if>
		<if test="numa3!= null"> numa3 = #{numa3,jdbcType=INTEGER}, </if>
		<if test="numa4!= null"> numa4 = #{numa4,jdbcType=INTEGER}, </if>
		<if test="numa5!= null"> numa5 = #{numa5,jdbcType=INTEGER}, </if>
		<if test="numa6!= null"> numa6 = #{numa6,jdbcType=INTEGER}, </if>
		<if test="remark!= null"> remark = #{remark,jdbcType=VARCHAR}, </if>
		<if test="isParent!= null"> is_parent = #{isParent,jdbcType=INTEGER}, </if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<insert id="insertResRenderPicOnekey" parameterType="com.nork.system.model.ResRenderPic"  useGeneratedKeys="true" keyProperty="id">
		insert into auto_render_res_render_pic
		<trim prefix="(" suffix=")" suffixOverrides=",">
		<if test="businessId!= null">business_id, </if>
		<if test="picCode!= null">pic_code, </if>
		<if test="picName!= null">pic_name, </if>
		<if test="sysTaskPicId!= null">sys_task_pic_id, </if>
		<if test="picFileName!= null">pic_file_name, </if>
		<if test="picType!= null">pic_type, </if>
		<if test="picSize!= null">pic_size, </if>
		<if test="picWeight!= null">pic_weight, </if>
		<if test="picHigh!= null">pic_high, </if>
		<if test="picSuffix!= null">pic_suffix, </if>
		<if test="picLevel!= null">pic_level, </if>
		<if test="picFormat!= null">pic_format, </if>
		<if test="picPath!= null">pic_path, </if>
		<if test="picDesc!= null">pic_desc, </if>
		<if test="picOrdering!= null">pic_ordering, </if>
		<if test="fileKey!= null">file_key, </if>
		<if test="fileKeys!= null">file_keys, </if>
		<if test="smallPicInfo!= null">small_pic_info, </if>
		<if test="viewPoint!= null">view_point, </if>
		<if test="scene!= null">scene, </if>
		<if test="renderingType!= null">rendering_type, </if>
		<if test="sequence!= null">sequence, </if>
		<if test="panoPath!= null">pano_path, </if>
		<if test="taskCreateTime!= null">task_create_time, </if>
		<if test="pid!= null">pid, </if>
		<if test="sysCode!= null">sys_code, </if>
		<if test="creator!= null">creator, </if>
		<if test="gmtCreate!= null">gmt_create, </if>
		<if test="modifier!= null">modifier, </if>
		<if test="gmtModified!= null">gmt_modified, </if>
		<if test="isDeleted!= null">is_deleted, </if>
		<if test="att1!= null">att1, </if>
		<if test="att2!= null">att2, </if>
		<if test="numa1!= null">numa1, </if>
		<if test="numa2!= null">numa2, </if>
		<if test="remark!= null">remark, </if>
		<if test="panoLevel!= null">pano_level, </if>
		<if test="roam!= null">roam, </if>
		<if test="sourcePlanId!= null">source_plan_id, </if>
		<if test="templateId!= null">source_template_id, </if>
		<if test="designPlanName!= null">design_plan_name, </if>
		<if test="spaceType!= null">space_type, </if>
		<if test="createUserId!= null">create_user_id, </if>
		<if test="area!= null">area, </if>
		<if test="designSceneId!= null">design_scene_id, </if>
		<if test="planRecommendedId!= null">plan_recommended_id, </if>
		<if test="platformId!= null">platform_id, </if>
		<if test="cameraLocation!= null">camera_location, </if>
		</trim>
  
		<trim prefix="values (" suffix=")" suffixOverrides=",">
		<if test="businessId!= null">  #{businessId,jdbcType=INTEGER}, </if>
		<if test="picCode!= null">  #{picCode,jdbcType=VARCHAR}, </if>
		<if test="picName!= null">  #{picName,jdbcType=VARCHAR}, </if>
		<if test="sysTaskPicId!= null">  #{sysTaskPicId,jdbcType=INTEGER}, </if>
		<if test="picFileName!= null">  #{picFileName,jdbcType=VARCHAR}, </if>
		<if test="picType!= null">  #{picType,jdbcType=VARCHAR}, </if>
		<if test="picSize!= null">  #{picSize,jdbcType=INTEGER}, </if>
		<if test="picWeight!= null">  #{picWeight,jdbcType=INTEGER}, </if>
		<if test="picHigh!= null">  #{picHigh,jdbcType=INTEGER}, </if>
		<if test="picSuffix!= null">  #{picSuffix,jdbcType=VARCHAR}, </if>
		<if test="picLevel!= null">  #{picLevel,jdbcType=INTEGER}, </if>
		<if test="picFormat!= null">  #{picFormat,jdbcType=VARCHAR}, </if>
		<if test="picPath!= null">  #{picPath,jdbcType=VARCHAR}, </if>
		<if test="picDesc!= null">  #{picDesc,jdbcType=VARCHAR}, </if>
		<if test="picOrdering!= null">  #{picOrdering,jdbcType=INTEGER}, </if>
		<if test="fileKey!= null">  #{fileKey,jdbcType=VARCHAR}, </if>
		<if test="fileKeys!= null">  #{fileKeys,jdbcType=VARCHAR}, </if>
		<if test="smallPicInfo!= null">  #{smallPicInfo,jdbcType=VARCHAR}, </if>
		<if test="viewPoint!= null">  #{viewPoint,jdbcType=INTEGER}, </if>
		<if test="scene!= null">  #{scene,jdbcType=INTEGER}, </if>
		<if test="renderingType!= null">  #{renderingType,jdbcType=INTEGER}, </if>
		<if test="sequence!= null">  #{sequence,jdbcType=INTEGER}, </if>
		<if test="panoPath!= null">  #{panoPath,jdbcType=VARCHAR}, </if>
		<if test="taskCreateTime!= null">  #{taskCreateTime,jdbcType=TIMESTAMP}, </if>
		<if test="pid!= null">  #{pid,jdbcType=INTEGER}, </if>
		<if test="sysCode!= null">  #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="att1!= null">  #{att1,jdbcType=VARCHAR}, </if>
		<if test="att2!= null">  #{att2,jdbcType=VARCHAR}, </if>
		<if test="numa1!= null">  #{numa1,jdbcType=INTEGER}, </if>
		<if test="numa2!= null">  #{numa2,jdbcType=INTEGER}, </if>
		<if test="remark!= null">  #{remark,jdbcType=VARCHAR}, </if>
		<if test="panoLevel!= null">  #{panoLevel,jdbcType=INTEGER}, </if>
		<if test="roam!= null">  #{roam,jdbcType=VARCHAR}, </if>
		<if test="sourcePlanId!= null">  #{sourcePlanId,jdbcType=INTEGER}, </if>
		<if test="templateId!= null">  #{templateId,jdbcType=INTEGER}, </if>
		<if test="designPlanName!= null">#{designPlanName}, </if>
		<if test="spaceType!= null">#{spaceType}, </if>
		<if test="createUserId!= null">#{createUserId}, </if>
		<if test="area!= null">#{area}, </if>
		<if test="designSceneId!= null">  #{designSceneId,jdbcType=INTEGER}, </if>
		<if test="planRecommendedId!= null">  #{planRecommendedId,jdbcType=INTEGER}, </if>
		<if test="platformId!= null"> #{platformId,jdbcType=INTEGER}, </if>
		<if test="cameraLocation!= null">  #{cameraLocation,jdbcType=VARCHAR}, </if>
		</trim>
	</insert>
	<insert id="insertResRenderVideoOnekey" parameterType="com.nork.system.model.ResRenderVideo"  useGeneratedKeys="true" keyProperty="id">
		insert into auto_render_res_render_video
		<trim prefix="(" suffix=")" suffixOverrides=",">
		<if test="businessId!= null">business_id, </if>
		<if test="videoCode!= null">video_code, </if>
		<if test="videoName!= null">video_name, </if>
		<if test="videoFileName!= null">video_file_name, </if>
		<if test="videoType!= null">video_type, </if>
		<if test="videoSize!= null">video_size, </if>
		<if test="videoSuffix!= null">video_suffix, </if>
		<if test="videoLevel!= null">video_level, </if>
		<if test="videoFormat!= null">video_format, </if>
		<if test="videoPath!= null">video_path, </if>
		<if test="videoDesc!= null">video_desc, </if>
		<if test="videoOrdering!= null">video_ordering, </if>
		<if test="fileKey!= null">file_key, </if>
		<if test="fileKeys!= null">file_keys, </if>
		<if test="smallVideoInfo!= null">small_video_info, </if>
		<if test="renderingType!= null">rendering_type, </if>
		<if test="sequence!= null">sequence, </if>
		<if test="taskCreateTime!= null">task_create_time, </if>
		<if test="sysTaskPicId!= null">sys_task_pic_id, </if>
		<if test="sysCode!= null">sys_code, </if>
		<if test="creator!= null">creator, </if>
		<if test="gmtCreate!= null">gmt_create, </if>
		<if test="modifier!= null">modifier, </if>
		<if test="gmtModified!= null">gmt_modified, </if>
		<if test="isDeleted!= null">is_deleted, </if>
		<if test="att1!= null">att1, </if>
		<if test="att2!= null">att2, </if>
		<if test="numa1!= null">numa1, </if>
		<if test="numa2!= null">numa2, </if>
		<if test="remark!= null">remark, </if>
		<if test="platformId!= null">platform_id, </if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
		<if test="businessId!= null">  #{businessId,jdbcType=INTEGER}, </if>
		<if test="videoCode!= null">  #{videoCode,jdbcType=VARCHAR}, </if>
		<if test="videoName!= null">  #{videoName,jdbcType=VARCHAR}, </if>
		<if test="videoFileName!= null">  #{videoFileName,jdbcType=VARCHAR}, </if>
		<if test="videoType!= null">  #{videoType,jdbcType=VARCHAR}, </if>
		<if test="videoSize!= null">  #{videoSize,jdbcType=INTEGER}, </if>
		<if test="videoSuffix!= null">  #{videoSuffix,jdbcType=VARCHAR}, </if>
		<if test="videoLevel!= null">  #{videoLevel,jdbcType=INTEGER}, </if>
		<if test="videoFormat!= null">  #{videoFormat,jdbcType=VARCHAR}, </if>
		<if test="videoPath!= null">  #{videoPath,jdbcType=VARCHAR}, </if>
		<if test="videoDesc!= null">  #{videoDesc,jdbcType=VARCHAR}, </if>
		<if test="videoOrdering!= null">  #{videoOrdering,jdbcType=INTEGER}, </if>
		<if test="fileKey!= null">  #{fileKey,jdbcType=VARCHAR}, </if>
		<if test="fileKeys!= null">  #{fileKeys,jdbcType=VARCHAR}, </if>
		<if test="smallVideoInfo!= null">  #{smallVideoInfo,jdbcType=VARCHAR}, </if>
		<if test="renderingType!= null">  #{renderingType,jdbcType=INTEGER}, </if>
		<if test="sequence!= null">  #{sequence,jdbcType=INTEGER}, </if>
		<if test="taskCreateTime!= null">  #{taskCreateTime,jdbcType=TIMESTAMP}, </if>
		<if test="sysTaskPicId!= null">  #{sysTaskPicId,jdbcType=INTEGER}, </if>
		<if test="sysCode!= null">  #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="att1!= null">  #{att1,jdbcType=VARCHAR}, </if>
		<if test="att2!= null">  #{att2,jdbcType=VARCHAR}, </if>
		<if test="numa1!= null">  #{numa1,jdbcType=INTEGER}, </if>
		<if test="numa2!= null">  #{numa2,jdbcType=INTEGER}, </if>
		<if test="remark!= null">  #{remark,jdbcType=VARCHAR}, </if>
		<if test="platformId!= null"> #{platformId,jdbcType=INTEGER}, </if>
		</trim>
	</insert>
	<sql id="All_Column_List">
		id,is_recommended,is_default_decorate,plan_number,design_recommended_style_id,release_time,cover_pic_Id,plan_code,plan_name,plan_source,house_id,living_id,residential_units_name,user_id,media_type,design_source_type,design_id,share_total,is_open,is_change,
		is_decorated,draft_state,baiMo_state,stuff_finish_state,decorate_finish_state,design_template_id,design_style_id,pic_id,model_id,model_3d_id,model_u3d_id,web_model_u3d_id,ios_model_u3d_id,ipad_model_u3d_id,pc_model_u3d_id,
		android_model_u3d_id,macBookpc_model_u3d_id,config_file_id,space_common_id,plan_desc,sys_code,creator,gmt_create,modifier,gmt_modified,is_deleted,remark,evening_file_id,dawn_file_id,night_file_id,effects_config,
		design_scene_id,visible,scene_modified,is_parent,recommended_plan_id,spelling_flower_file_id,spelling_flower_product
 
	</sql>
	<!-- **结果定义** -->
	<resultMap id="AllResultMap" type="com.nork.design.model.DesignPlan">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result  column="plan_code" property="planCode" jdbcType="VARCHAR" />
		<result  column="plan_name" property="planName" jdbcType="VARCHAR" />
		<result column="plan_source" property="planSource" jdbcType="VARCHAR"/>
		<result column="house_id" property="houseId" jdbcType="INTEGER"/>
		<result column="living_id" property="livingId" jdbcType="INTEGER"/>
		<result column="residential_units_name" property="residentialUnitsName" jdbcType="VARCHAR"/>
		<result  column="user_id" property="userId" jdbcType="INTEGER" />
		<result  column="media_type" property="mediaType" jdbcType="INTEGER" />
		<result  column="design_source_type" property="designSourceType" jdbcType="INTEGER" />
		<result  column="design_id" property="designId" jdbcType="INTEGER" />
		<result  column="design_template_id" property="designTemplateId" jdbcType="INTEGER" />
		<result  column="design_style_id" property="designStyleId" jdbcType="INTEGER" />
		<result  column="pic_id" property="picId" jdbcType="INTEGER" />
		<result  column="model_id" property="modelId" jdbcType="INTEGER" />
		<result  column="model_3d_id" property="model3dId" jdbcType="INTEGER" />
		<result  column="model_u3d_id" property="modelU3dId" jdbcType="INTEGER" />
		<result  column="web_model_u3d_id" property="webModelU3dId" jdbcType="INTEGER" />
		<result  column="ios_model_u3d_id" property="iosModelU3dId" jdbcType="INTEGER" />
		<result  column="ipad_model_u3d_id" property="ipadModelU3dId" jdbcType="INTEGER" />
		<result  column="pc_model_u3d_id" property="pcModelU3dId" jdbcType="INTEGER" />
		<result  column="android_model_u3d_id" property="androidModelU3dId" jdbcType="INTEGER" />
		<result  column="macBookpc_model_u3d_id" property="macBookpcModelU3dId" jdbcType="INTEGER" />
		<result  column="config_file_id" property="configFileId" jdbcType="INTEGER" />
		<result  column="space_common_id" property="spaceCommonId" jdbcType="INTEGER" />
		<result  column="space_function_id" property="spaceFunctionId" jdbcType="INTEGER" />
		<result  column="space_areas" property="spaceAreas" jdbcType="VARCHAR" />
		<result  column="plan_desc" property="planDesc" jdbcType="VARCHAR" />
		<result  column="sys_code" property="sysCode" jdbcType="VARCHAR" />
		<result  column="creator" property="creator" jdbcType="VARCHAR" />
		<result  column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
		<result  column="modifier" property="modifier" jdbcType="VARCHAR" />
		<result  column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
		<result  column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
		<result  column="remark" property="remark" jdbcType="VARCHAR" />
		<!--<result  column="evening_file_id" property="eveningFileId" jdbcType="INTEGER" />
		<result  column="dawn_file_id" property="dawnFileId" jdbcType="INTEGER" />
		<result  column="night_file_id" property="nightFileId" jdbcType="INTEGER" />-->
		<result  column="share_total" property="shareTotal" jdbcType="INTEGER" />
		<result  column="is_open" property="isOpen" jdbcType="INTEGER" />
		<result  column="is_change" property="isChange" jdbcType="INTEGER" />
		<result  column="is_decorated" property="isDecorated" jdbcType="INTEGER" />
		<result  column="draft_state" property="draftState" jdbcType="INTEGER" />
		<result  column="baiMo_state" property="baiMoState" jdbcType="INTEGER" />
		<result  column="stuff_finish_state" property="stuffFinishState" jdbcType="INTEGER" />
		<result  column="decorate_finish_state" property="decorateFinishState" jdbcType="INTEGER" />
 
		
		<result  column="cover_pic_Id" property="coverPicId" jdbcType="INTEGER" />
<!-- 		<result  column="is_release" property="isRelease" jdbcType="INTEGER" /> -->
		<result  column="release_time" property="releaseTime" jdbcType="TIMESTAMP" />
		<result  column="design_recommended_style_id" property="designRecommendedStyleId" jdbcType="INTEGER" />
		
 		<result  column="effects_config" property="effectsConfig" jdbcType="VARCHAR" />
 		
 		<result  column="is_recommended" property="isRecommended" jdbcType="INTEGER" />
 		<result  column="is_default_decorate" property="isDefaultDecorate" jdbcType="INTEGER" />
 		<result  column="plan_number" property="planNumber" jdbcType="VARCHAR" />

 		<result  column="design_scene_id" property="designSceneId" jdbcType="INTEGER" />
 		<result  column="visible" property="visible" jdbcType="INTEGER" />
 		<result  column="scene_modified" property="sceneModified" jdbcType="INTEGER" />
 		<result  column="is_parent" property="isParent" jdbcType="INTEGER" />
		<result  column="recommended_plan_id" property="recommendedPlanId" jdbcType="INTEGER" />
		<result  column="spelling_flower_file_id" property="spellingFlowerFileId" jdbcType="INTEGER" />
		<result  column="spelling_flower_product" property="spellingFlowerProduct" jdbcType="VARCHAR" />
	</resultMap>
	<select id="selectByPrimaryKeyPlan" resultMap="AllResultMap"
		parameterType="java.lang.Integer">
		select
		<include refid="All_Column_List" />
		from onekey_decoration_design_plan
		where id = #{id,jdbcType=INTEGER}
	</select>
	<!-- **常量定义** -->
	<sql id="All_Column_List2">
	id,old_id,file_code,file_name,file_original_name,file_type,file_size,file_weight,file_high,file_length,file_suffix,file_format,file_level,
	file_path,file_desc,file_ordering,sys_code,creator,gmt_create,modifier,gmt_modified,is_deleted,file_key,business_id,small_pic_info,
	view_point,scene,sequence,rendering_type,pano_path,min_height,is_model_share,att1,att2,att3,att4,att5,att6,numa1,numa2,numa3,numa4,numa5,
	numa6,remark,source,is_parent
	</sql>
	<resultMap id="AllResultMap2" type="com.nork.system.model.ResDesign">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result  column="old_id" property="oldId" jdbcType="INTEGER" />
		<result  column="file_code" property="fileCode" jdbcType="VARCHAR" />
		<result  column="file_name" property="fileName" jdbcType="VARCHAR" />
		<result  column="file_original_name" property="fileOriginalName" jdbcType="VARCHAR" />
		<result  column="file_type" property="fileType" jdbcType="VARCHAR" />
		<result  column="file_size" property="fileSize" jdbcType="VARCHAR" />
		<result  column="file_weight" property="fileWeight" jdbcType="VARCHAR" />
		<result  column="file_high" property="fileHigh" jdbcType="VARCHAR" />
		<result  column="file_length" property="fileLength" jdbcType="INTEGER" />
		<result  column="file_suffix" property="fileSuffix" jdbcType="VARCHAR" />
		<result  column="file_format" property="fileFormat" jdbcType="VARCHAR" />
		<result  column="file_level" property="fileLevel" jdbcType="VARCHAR" />
		<result  column="file_path" property="filePath" jdbcType="VARCHAR" />
		<result  column="file_desc" property="fileDesc" jdbcType="VARCHAR" />
		<result  column="file_ordering" property="fileOrdering" jdbcType="INTEGER" />
		<result  column="sys_code" property="sysCode" jdbcType="VARCHAR" />
		<result  column="creator" property="creator" jdbcType="VARCHAR" />
		<result  column="gmtCreate" property="gmtCreate" jdbcType="TIMESTAMP" />
		<result  column="modifier" property="modifier" jdbcType="VARCHAR" />
		<result  column="gmtModified" property="gmtModified" jdbcType="TIMESTAMP" />
		<result  column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
		<result  column="file_key" property="fileKey" jdbcType="VARCHAR" />
		<result  column="business_id" property="businessId" jdbcType="INTEGER" />
		<result  column="small_pic_info" property="smallPicInfo" jdbcType="VARCHAR" />
		<result  column="view_point" property="viewPoint" jdbcType="INTEGER" />
		<result  column="scene" property="scene" jdbcType="INTEGER" />
		<result  column="sequence" property="sequence" jdbcType="INTEGER" />
		<result  column="rendering_type" property="renderingType" jdbcType="INTEGER" />
		<result  column="pano_path" property="panoPath" jdbcType="VARCHAR" />
		<result  column="min_height" property="minHeight" jdbcType="INTEGER" />
		<result  column="is_model_share" property="isModelShare" jdbcType="INTEGER" />
		<result  column="att1" property="att1" jdbcType="VARCHAR" />
		<result  column="att2" property="att2" jdbcType="VARCHAR" />
		<result  column="att3" property="att3" jdbcType="VARCHAR" />
		<result  column="att4" property="att4" jdbcType="VARCHAR" />
		<result  column="att5" property="att5" jdbcType="VARCHAR" />
		<result  column="att6" property="att6" jdbcType="VARCHAR" />
		<result  column="numa1" property="numa1" jdbcType="INTEGER" />
		<result  column="numa2" property="numa2" jdbcType="INTEGER" />
		<result  column="numa3" property="numa3" jdbcType="INTEGER" />
		<result  column="numa4" property="numa4" jdbcType="INTEGER" />
		<result  column="numa5" property="numa5" jdbcType="INTEGER" />
		<result  column="numa6" property="numa6" jdbcType="INTEGER" />
		<result  column="remark" property="remark" jdbcType="VARCHAR" />
		<result  column="plan_code" property="planCode" jdbcType="VARCHAR" />
		<result  column="plan_name" property="planName" jdbcType="VARCHAR" />
		<result  column="source" property="source" jdbcType="VARCHAR" />
		<result  column="is_parent" property="isParent" jdbcType="INTEGER" />
	</resultMap>
	<select id="selectByPrimaryKeyRes" resultMap="AllResultMap2"
		parameterType="java.lang.Integer">
		select
		<include refid="All_Column_List2" />
		from onekey_decoration_res_design
		where id = #{id,jdbcType=INTEGER}
	</select>
	<!-- **更新定义** -->
	<update id="updateByPrimaryKeySelective" parameterType="com.nork.system.model.ResRenderVideo">
		update auto_render_res_render_video
		<set>
		<if test="businessId!= null">  business_id = #{businessId,jdbcType=INTEGER}, </if>
		<if test="videoCode!= null">  video_code = #{videoCode,jdbcType=VARCHAR}, </if>
		<if test="videoName!= null">  video_name = #{videoName,jdbcType=VARCHAR}, </if>
		<if test="videoFileName!= null">  video_file_name = #{videoFileName,jdbcType=VARCHAR}, </if>
		<if test="videoType!= null">  video_type = #{videoType,jdbcType=VARCHAR}, </if>
		<if test="videoSize!= null">  video_size = #{videoSize,jdbcType=INTEGER}, </if>
		<if test="videoSuffix!= null">  video_suffix = #{videoSuffix,jdbcType=VARCHAR}, </if>
		<if test="videoLevel!= null">  video_level = #{videoLevel,jdbcType=INTEGER}, </if>
		<if test="videoFormat!= null">  video_format = #{videoFormat,jdbcType=VARCHAR}, </if>
		<if test="videoPath!= null">  video_path = #{videoPath,jdbcType=VARCHAR}, </if>
		<if test="videoDesc!= null">  video_desc = #{videoDesc,jdbcType=VARCHAR}, </if>
		<if test="videoOrdering!= null">  video_ordering = #{videoOrdering,jdbcType=INTEGER}, </if>
		<if test="fileKey!= null">  file_key = #{fileKey,jdbcType=VARCHAR}, </if>
		<if test="fileKeys!= null">  file_keys = #{fileKeys,jdbcType=VARCHAR}, </if>
		<if test="smallVideoInfo!= null">  small_video_info = #{smallVideoInfo,jdbcType=VARCHAR}, </if>
		<if test="renderingType!= null">  rendering_type = #{renderingType,jdbcType=INTEGER}, </if>
		<if test="sequence!= null">  sequence = #{sequence,jdbcType=INTEGER}, </if>
		<if test="taskCreateTime!= null">  task_create_time = #{taskCreateTime,jdbcType=TIMESTAMP}, </if>
		<if test="sysTaskPicId!= null">  sys_task_pic_id = #{sysTaskPicId,jdbcType=INTEGER}, </if>
		<if test="sysCode!= null">  sys_code = #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  creator = #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  gmt_create = #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  modifier = #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  is_deleted = #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="att1!= null">  att1 = #{att1,jdbcType=VARCHAR}, </if>
		<if test="att2!= null">  att2 = #{att2,jdbcType=VARCHAR}, </if>
		<if test="numa1!= null">  numa1 = #{numa1,jdbcType=INTEGER}, </if>
		<if test="numa2!= null">  numa2 = #{numa2,jdbcType=INTEGER}, </if>
		<if test="remark!= null">  remark = #{remark,jdbcType=VARCHAR}, </if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<!-- 设计方案产品 批量插入 ，只需要对数据库连接一次 -->
     <insert id="batchAdd"   useGeneratedKeys="true"   parameterType="java.util.List">
	     <selectKey resultType="long" keyProperty="id" order="AFTER">  
	        SELECT  
	        LAST_INSERT_ID()  
	        </selectKey>  
			insert into onekey_decoration_design_plan_product (
		
			sys_code, 
			split_textures_choose_info,
			plan_group_id, 
			creator,
			gmt_create, 
			modifier,
			gmt_modified, 
			is_deleted,
			group_type, 
			model_product_id, 
			
			plan_id, 
			is_dirty,
			product_id,
			init_product_id, 
			location_file_id, 
			product_sequence, 
			material_pic_id, 
			att2, 
			att3,
			att4,
			
			att5, 
			att6,
			planProduct_id, 
			display_status, 
			num_att3,
			num_att4,
			remark,
			is_hide, 
			
			pos_index_path, 
			product_group_id, 
			is_main_product, 
			pos_name, 
			bind_parent_productId ,
			is_standard,
			center,
			region_mark,
			style_id,
			measure_code,
			describe_info,
			product_index,
			is_main_structure_product,
			is_group_replace_way,
			wall_orientation,
		 	wall_type
			    )   
			    values  
	    <foreach collection="list" item="item" index="index" separator="," >  
	            (
	        #{item.sysCode,jdbcType=VARCHAR}, 
			#{item.splitTexturesChooseInfo,jdbcType=VARCHAR}, 
			#{item.planGroupId,jdbcType=VARCHAR}, 
			#{item.creator,jdbcType=VARCHAR}, 
			#{item.gmtCreate,jdbcType=TIMESTAMP},
			#{item.modifier,jdbcType=VARCHAR}, 
			#{item.gmtModified,jdbcType=TIMESTAMP},  
			#{item.isDeleted,jdbcType=INTEGER}, 
			#{item.groupType,jdbcType=INTEGER},  
			#{item.modelProductId,jdbcType=INTEGER},
			  
			#{item.planId,jdbcType=INTEGER}, 
			#{item.isDirty,jdbcType=INTEGER},  
			#{item.productId,jdbcType=INTEGER},  
			#{item.initProductId,jdbcType=INTEGER},  
			#{item.locationFileId,jdbcType=INTEGER},  
			#{item.productSequence,jdbcType=VARCHAR},  
			#{item.materialPicId,jdbcType=VARCHAR},  
			#{item.att2,jdbcType=VARCHAR},  
			#{item.att3,jdbcType=VARCHAR}, 			
			#{item.att4,jdbcType=VARCHAR}, 
			
			#{item.att5,jdbcType=VARCHAR},  
			#{item.att6,jdbcType=VARCHAR}, 
			#{item.planProductId,jdbcType=INTEGER}, 
			#{item.displayStatus,jdbcType=INTEGER},  
			#{item.numAtt3,jdbcType=DOUBLE}, 
			#{item.numAtt4,jdbcType=DOUBLE}, 
			#{item.remark,jdbcType=VARCHAR},  
			#{item.isHide,jdbcType=INTEGER},  
			
			#{item.posIndexPath,jdbcType=VARCHAR},  
			#{item.productGroupId,jdbcType=INTEGER},  
			#{item.isMainProduct,jdbcType=INTEGER},  
			#{item.posName,jdbcType=VARCHAR},
			#{item.bindParentProductId,jdbcType=VARCHAR} ,
			#{item.isStandard,jdbcType=INTEGER}, 
			#{item.center,jdbcType=VARCHAR}, 
			#{item.regionMark,jdbcType=VARCHAR}, 
			#{item.styleId,jdbcType=INTEGER},
			#{item.measureCode,jdbcType=VARCHAR},
			#{item.describeInfo,jdbcType=VARCHAR},
			#{item.productIndex,jdbcType=INTEGER},
			#{item.isMainStructureProduct,jdbcType=INTEGER},
			#{item.isGroupReplaceWay,jdbcType=INTEGER},
			#{item.wallOrientation,jdbcType=VARCHAR},
			#{item.wallType,jdbcType=VARCHAR}
			<!-- 			<if test="isStandard!= null">#{item.isStandard,jdbcType=INTEGER}, </if> -->
<!-- 			<if test="center!= null and center!='' ">#{item.center,jdbcType=VARCHAR}, </if> -->
<!-- 			<if test="regionMark!= null and regionMark!='' ">#{item.regionMark,jdbcType=VARCHAR}, </if> -->
<!-- 			<if test="styleId!= null">#{item.styleId,jdbcType=INTEGER}, </if> -->
<!-- 			<if test="measureCode!= null and measureCode!='' ">#{item.measureCode,jdbcType=VARCHAR}, </if> -->
<!-- 			<if test="describeInfo!= null and describeInfo!=''">#{item.describeInfo,jdbcType=VARCHAR}, </if> -->
<!-- 			<if test="productIndex!= null">#{item.productIndex,jdbcType=INTEGER} </if> -->
	        )  
	    </foreach> 

	</insert>
	<insert id="insertList" parameterType="java.util.List">
			insert into onekey_decoration_design_plan_product
		<if test="designPlanProductRenderList != null and designPlanProductRenderList.size > 0">
			(
				id,
				wall_orientation,
				wall_type,
				is_main_structure_product,
				is_group_replace_way,
				product_index,
				is_standard,center,
				region_mark,
				style_id,
				measure_code,
				describe_info,
				sys_code,
				split_textures_choose_info,
				plan_group_id,
				creator,
				gmt_create,
				modifier,
				gmt_modified,
				is_deleted,
				group_type,
				model_product_id,
				plan_id,
				is_dirty,
				product_id,
				init_product_id,
				location_file_id,
				product_sequence,
				material_pic_id,
				att2,att3,att4,att5,att6,
				planProduct_id,
				display_status,
				num_att3,
				num_att4,
				remark,
				is_hide,
				pos_index_path,
				product_group_id,
				is_main_product,
				pos_name,
				bind_parent_productId,
				same_product_type_index
	
			)
			values
			<foreach collection="designPlanProductRenderList" item="item" index="index" separator="," >
				(
				#{item.id,jdbcType=INTEGER}, 
				#{item.wallOrientation,jdbcType=VARCHAR}, 
				#{item.wallType,jdbcType=VARCHAR}, 
				
				#{item.isMainStructureProduct,jdbcType=INTEGER}, 
				
				#{item.isGroupReplaceWay,jdbcType=INTEGER}, 
				
				#{item.productIndex,jdbcType=INTEGER},
				 
				#{item.isStandard,jdbcType=INTEGER}, 
				
				#{item.center,jdbcType=VARCHAR}, 
				#{item.regionMark,jdbcType=VARCHAR}, 
				#{item.styleId,jdbcType=INTEGER},
				 
				#{item.measureCode,jdbcType=VARCHAR}, 
				
				#{item.describeInfo,jdbcType=VARCHAR},
				 
				#{item.sysCode,jdbcType=VARCHAR}, 
				#{item.splitTexturesChooseInfo,jdbcType=VARCHAR}, 
				
				#{item.planGroupId,jdbcType=VARCHAR}, 
				
				#{item.creator,jdbcType=VARCHAR}, 
				#{item.gmtCreate,jdbcType=TIMESTAMP}, 
				
				#{item.modifier,jdbcType=VARCHAR}, 
				#{item.gmtModified,jdbcType=TIMESTAMP},
				 
				#{item.isDeleted,jdbcType=INTEGER}, 
				#{item.groupType,jdbcType=INTEGER}, 
				#{item.modelProductId,jdbcType=INTEGER}, 
				
				#{item.planId,jdbcType=INTEGER}, 
				#{item.isDirty,jdbcType=INTEGER}, 
				#{item.productId,jdbcType=INTEGER}, 
				#{item.initProductId,jdbcType=INTEGER}, 
				#{item.locationFileId,jdbcType=INTEGER}, 
				#{item.productSequence,jdbcType=VARCHAR}, 
				#{item.materialPicId,jdbcType=VARCHAR},
				
				 
				#{item.att2,jdbcType=VARCHAR}, 
				#{item.att3,jdbcType=VARCHAR}, 
				#{item.att4,jdbcType=VARCHAR}, 
				#{item.att5,jdbcType=VARCHAR}, 
				#{item.att6,jdbcType=VARCHAR}, 
				#{item.planProductId,jdbcType=INTEGER}, 
				#{item.displayStatus,jdbcType=INTEGER}, 
				#{item.numAtt3,jdbcType=DOUBLE}, 
				#{item.numAtt4,jdbcType=DOUBLE}, 
				#{item.remark,jdbcType=VARCHAR}, 
				#{item.isHide,jdbcType=INTEGER}, 
				
				#{item.posIndexPath,jdbcType=VARCHAR}, 
				#{item.productGroupId,jdbcType=INTEGER}, 
				#{item.isMainProduct,jdbcType=INTEGER},
				#{item.posName,jdbcType=VARCHAR},
				#{item.bindParentProductId,jdbcType=VARCHAR},
				#{item.sameProductTypeIndex,jdbcType=INTEGER}
				
				)
		
			</foreach>
		</if>
	</insert>
	<!-- **结果定义** -->
	<resultMap id="AllResultMap4" type="com.nork.design.model.DesignPlanProduct">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result  column="sys_code" property="sysCode" jdbcType="VARCHAR" />
		<result  column="split_textures_choose_info" property="splitTexturesChooseInfo" jdbcType="VARCHAR" />
		<result  column="plan_group_id" property="planGroupId" jdbcType="VARCHAR" />
		<result  column="creator" property="creator" jdbcType="VARCHAR" />
		<result  column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
		<result  column="modifier" property="modifier" jdbcType="VARCHAR" />
		<result  column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
		<result  column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
		<result  column="group_type" property="groupType" jdbcType="INTEGER" />
		<result  column="model_product_id" property="modelProductId" jdbcType="INTEGER" />
		<result  column="plan_id" property="planId" jdbcType="INTEGER" />
		<result  column="is_dirty" property="isDirty" jdbcType="INTEGER" />
		<result  column="product_id" property="productId" jdbcType="INTEGER" />
		<result  column="init_product_id" property="initProductId" jdbcType="INTEGER" />
		<result  column="location_file_id" property="locationFileId" jdbcType="INTEGER" />
		<result  column="product_sequence" property="productSequence" jdbcType="VARCHAR" />
		<result  column="material_pic_id" property="materialPicId" jdbcType="VARCHAR" />
		<result  column="att2" property="att2" jdbcType="VARCHAR" />
		<result  column="att3" property="att3" jdbcType="VARCHAR" />
		<result  column="att4" property="att4" jdbcType="VARCHAR" />
		<result  column="att5" property="att5" jdbcType="VARCHAR" />
		<result  column="att6" property="att6" jdbcType="VARCHAR" />
		<result  column="date_att1" property="dateAtt1" jdbcType="TIMESTAMP" />
		<result  column="date_att2" property="dateAtt2" jdbcType="TIMESTAMP" />
		<result  column="planProduct_id" property="planProductId" jdbcType="INTEGER" />
		<result  column="display_status" property="displayStatus" jdbcType="INTEGER" />
		<result  column="num_att3" property="numAtt3" jdbcType="DOUBLE" />
		<result  column="num_att4" property="numAtt4" jdbcType="DOUBLE" />
		<result  column="remark" property="remark" jdbcType="VARCHAR" />
		<result  column="is_hide" property="isHide" jdbcType="INTEGER" />
		<result  column="pos_index_path" property="posIndexPath" jdbcType="VARCHAR" />
		<result  column="product_group_id" property="productGroupId" jdbcType="INTEGER" />
		<result  column="is_main_product" property="isMainProduct" jdbcType="INTEGER" />
		<result  column="pos_name" property="posName" jdbcType="VARCHAR" />
		<result  column="bind_parent_productId" property="bindParentProductId" jdbcType="VARCHAR" />
		<result  column="same_product_type_index" property="sameProductTypeIndex" jdbcType="INTEGER" />
		
		<result  column="is_standard" property="isStandard" jdbcType="INTEGER" />
		<result  column="center" property="center" jdbcType="VARCHAR" />
		<result  column="region_mark" property="regionMark" jdbcType="VARCHAR" />
		<result  column="style_id" property="styleId" jdbcType="INTEGER" />
		<result  column="measure_code" property="measureCode" jdbcType="VARCHAR" />
		<result  column="describe_info" property="describeInfo" jdbcType="VARCHAR" />
		<result  column="product_index" property="productIndex" jdbcType="INTEGER" />
		
		<result  column="is_main_structure_product" property="isMainStructureProduct" jdbcType="INTEGER" />
		<result  column="is_group_replace_way" property="isGroupReplaceWay" jdbcType="INTEGER" />

		<result  column="wall_orientation" property="wallOrientation" jdbcType="VARCHAR" />
		<result  column="wall_type" property="wallType" jdbcType="VARCHAR" />

		<result  column="productPutawayState" property="productPutawayState" jdbcType="INTEGER" />
		<result  column="product_code" property="productCode" jdbcType="VARCHAR" />

	</resultMap>
	<!-- **常量定义** -->
	<sql id="All_Column_List4">
		id,wall_orientation,wall_type,is_main_structure_product,is_group_replace_way,product_index,is_standard,center,region_mark,style_id,measure_code,describe_info,sys_code,split_textures_choose_info,plan_group_id,creator,gmt_create,modifier,gmt_modified,is_deleted,group_type,model_product_id,plan_id,is_dirty,product_id,init_product_id,location_file_id,product_sequence,material_pic_id,att2,att3,att4,att5,att6,date_att1,date_att2,planProduct_id,display_status,num_att3,num_att4,remark,is_hide,pos_index_path,product_group_id,is_main_product,pos_name,bind_parent_productId,same_product_type_index
	</sql>
	
	<!-- 按主键查询 -->
	<select id="selectByPrimaryKey" resultMap="AllResultMap4"
		parameterType="java.lang.Integer">
		select
		<include refid="All_Column_List4" />
		from onekey_decoration_design_plan_product
		where id = #{id,jdbcType=INTEGER}
	</select>
	
	<!-- getListByPlanIdAndIsDeleted -->
	<select id="getListByPlanIdAndIsDeleted" resultMap="AllResultMap4">
		select 
		<include refid="All_Column_List4"></include>
		from onekey_decoration_design_plan_product where 1=1
		<if test="planId != null">
			and plan_id = #{planId}
		</if>
		<if test="isDeleted">
			and is_deleted = #{isDeleted}
		</if>
	</select>
	
	<!-- 查询所有，可排序 -->
    <select id="selectList" resultMap="AllResultMap4"
    parameterType="com.nork.design.model.DesignPlanProduct">
		select
		<include refid="All_Column_List4" />
		from onekey_decoration_design_plan_product
        where 1=1
        <if test="isMainStructureProduct!= null">and is_main_structure_product = #{isMainStructureProduct,jdbcType=INTEGER}  </if>
		<if test="isGroupReplaceWay!= null">and is_group_replace_way = #{isGroupReplaceWay,jdbcType=INTEGER}  </if>
        <if test="productIndex!= null"> and   product_index = #{product_index,jdbcType=INTEGER} </if>
        <if test="isStandard!= null"> and   is_standard = #{isStandard,jdbcType=INTEGER} </if>
		<if test="center!= null and center!='' ">and   center = #{center,jdbcType=VARCHAR} </if>
		<if test="regionMark!= null and regionMark!='' ">and    region_mark = #{regionMark,jdbcType=VARCHAR} </if>
		<if test="styleId!= null">and   style_id = #{styleId,jdbcType=INTEGER} </if>
		<if test="measureCode!= null and measureCode!='' ">and   measure_code = #{measureCode,jdbcType=VARCHAR} </if>
		<if test="describeInfo!= null and describeInfo!=''">and   describe_info = #{describeInfo,jdbcType=VARCHAR} </if>
		<if test="sysCode!= null">  and sys_code = #{sysCode,jdbcType=VARCHAR} </if>
		<if test="planGroupId!= null">  and plan_group_id = #{planGroupId,jdbcType=VARCHAR} </if>
		<if test="creator!= null">  and creator = #{creator,jdbcType=VARCHAR} </if>
		<if test="gmtCreate!= null">  and gmt_create = #{gmtCreate,jdbcType=TIMESTAMP} </if>
		<if test="modifier!= null">  and modifier = #{modifier,jdbcType=VARCHAR} </if>
		<if test="gmtModified!= null">  and gmt_modified = #{gmtModified,jdbcType=TIMESTAMP} </if>
		<if test="isDeleted!= null">  and is_deleted = #{isDeleted,jdbcType=INTEGER} </if>
		<if test="groupType!= null">  and group_type = #{groupType,jdbcType=INTEGER} </if>
		<if test="modelProductId!= null">  and model_product_id = #{modelProductId,jdbcType=INTEGER} </if>
		<if test="planId!= null">  and plan_id = #{planId,jdbcType=INTEGER} </if>
		<if test="isDirty!= null">  and is_dirty = #{isDirty,jdbcType=INTEGER} </if>
		<if test="productId!= null">  and product_id = #{productId,jdbcType=INTEGER} </if>
		<if test="initProductId!= null">  and init_product_id = #{initProductId,jdbcType=INTEGER} </if>
		<if test="locationFileId!= null">  and location_file_id = #{locationFileId,jdbcType=INTEGER} </if>
		<if test="productSequence!= null">  and product_sequence = #{productSequence,jdbcType=VARCHAR} </if>
		<if test="materialPicId!= null">  and material_pic_id = #{materialPicId,jdbcType=VARCHAR} </if>
		<if test="att2!= null">  and att2 = #{att2,jdbcType=VARCHAR} </if>
		<if test="att3!= null">  and att3 = #{att3,jdbcType=VARCHAR} </if>
		<if test="att4!= null">  and att4 = #{att4,jdbcType=VARCHAR} </if>
		<if test="att5!= null">  and att5 = #{att5,jdbcType=VARCHAR} </if>
		<if test="att6!= null">  and att6 = #{att6,jdbcType=VARCHAR} </if>
		<if test="dateAtt1!= null">  and date_att1 = #{dateAtt1,jdbcType=TIMESTAMP} </if>
		<if test="dateAtt2!= null">  and date_att2 = #{dateAtt2,jdbcType=TIMESTAMP} </if>
		<if test="planProductId!= null">  and planProduct_id = #{planProductId,jdbcType=INTEGER} </if>
		<if test="displayStatus!= null">  and display_status = #{displayStatus,jdbcType=INTEGER} </if>
		<if test="numAtt3!= null">  and num_att3 = #{numAtt3,jdbcType=DOUBLE} </if>
		<if test="numAtt4!= null">  and num_att4 = #{numAtt4,jdbcType=DOUBLE} </if>
		<if test="remark!= null">  and remark = #{remark,jdbcType=VARCHAR} </if>
		<if test="isHide!= null">  and is_hide = #{isHide,jdbcType=INTEGER} </if>
		<if test="posIndexPath!= null">  and pos_index_path = #{posIndexPath,jdbcType=VARCHAR} </if>
		<if test="productGroupId!= null">  and product_group_id = #{productGroupId,jdbcType=INTEGER} </if>
		<if test="isMainProduct!= null">  and is_main_product = #{isMainProduct,jdbcType=INTEGER} </if>
		<if test="sameProductTypeIndex!= null">  and same_product_type_index = #{sameProductTypeIndex,jdbcType=INTEGER} </if>
		<if test="posName!= null">  and pos_name = #{posName,jdbcType=VARCHAR} </if>
		<if test="bindParentProductId!= null">  and bind_parent_productId = #{bindParentProductId,jdbcType=VARCHAR} </if>
		<if test="splitTexturesChooseInfo!= null">  and split_textures_choose_info = #{splitTexturesChooseInfo,jdbcType=VARCHAR} </if>
		<if test="wallOrientation!= null">  and wall_orientation = #{wallOrientation,jdbcType=VARCHAR} </if>
		<if test="wallType!= null">  and wall_type = #{wallType,jdbcType=VARCHAR} </if>
		<if test="order != null and  order !=''  ">
			order by ${order}
			<if test="orderNum != null and  orderNum !='' ">
				${orderNum}
			</if>
		</if>
		<if test="orders != null and  orders !=''  ">
		   order by ${orders}
		</if>
	</select>
	<!-- **更新定义** -->
	<update id="updateByPrimaryKeyPlanProduct" parameterType="com.nork.design.model.DesignPlanProduct">
		update onekey_decoration_design_plan_product
		<set>
		<if test="sysCode!= null">  sys_code = #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="splitTexturesChooseInfo!= null">  split_textures_choose_info = #{splitTexturesChooseInfo,jdbcType=VARCHAR}, </if>
		<if test="planGroupId!= null">  plan_group_id = #{planGroupId,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  creator = #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  gmt_create = #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  modifier = #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  is_deleted = #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="groupType!= null">  group_type = #{groupType,jdbcType=INTEGER}, </if>
		<if test="modelProductId!= null">  model_product_id = #{modelProductId,jdbcType=INTEGER}, </if>
		<if test="planId!= null">  plan_id = #{planId,jdbcType=INTEGER}, </if>
		<if test="isDirty!= null">  is_dirty = #{isDirty,jdbcType=INTEGER}, </if>
		<if test="productId!= null">  product_id = #{productId,jdbcType=INTEGER}, </if>
		<if test="initProductId!= null">  init_product_id = #{initProductId,jdbcType=INTEGER}, </if>
		<if test="locationFileId!= null">  location_file_id = #{locationFileId,jdbcType=VARCHAR}, </if>
		<if test="productSequence!= null">  product_sequence = #{productSequence,jdbcType=VARCHAR}, </if>
		<if test="materialPicId!= null">  material_pic_id = #{materialPicId,jdbcType=VARCHAR}, </if>
		<if test="att2!= null">  att2 = #{att2,jdbcType=VARCHAR}, </if>
		<if test="att3!= null">  att3 = #{att3,jdbcType=VARCHAR}, </if>
		<if test="att4!= null">  att4 = #{att4,jdbcType=VARCHAR}, </if>
		<if test="att5!= null">  att5 = #{att5,jdbcType=VARCHAR}, </if>
		<if test="att6!= null">  att6 = #{att6,jdbcType=VARCHAR}, </if>
		<if test="dateAtt1!= null">  date_att1 = #{dateAtt1,jdbcType=TIMESTAMP}, </if>
		<if test="dateAtt2!= null">  date_att2 = #{dateAtt2,jdbcType=TIMESTAMP}, </if>
		<if test="planProductId!= null">  planProduct_id = #{planProductId,jdbcType=INTEGER}, </if>
		<if test="displayStatus!= null">  display_status = #{displayStatus,jdbcType=INTEGER}, </if>
		<if test="numAtt3!= null">  num_att3 = #{numAtt3,jdbcType=DOUBLE}, </if>
		<if test="numAtt4!= null">  num_att4 = #{numAtt4,jdbcType=DOUBLE}, </if>
		<if test="remark!= null">  remark = #{remark,jdbcType=VARCHAR}, </if>
		<if test="isHide!= null">  is_hide = #{isHide,jdbcType=INTEGER}, </if>
		<if test="posIndexPath!= null">  pos_index_path = #{posIndexPath,jdbcType=VARCHAR}, </if>
		<if test="productGroupId!= null">  product_group_id = #{productGroupId,jdbcType=INTEGER},</if>
		<if test="isMainProduct!= null">  is_main_product = #{isMainProduct,jdbcType=INTEGER},</if>
		<if test="posName!= null">  pos_name = #{posName,jdbcType=VARCHAR},</if>
		<if test="bindParentProductId!= null"> bind_parent_productId = #{bindParentProductId,jdbcType=VARCHAR}, </if>
		
		<if test="isStandard!= null"> is_standard = #{isStandard,jdbcType=INTEGER}, </if>
		<if test="center!= null and center!='' ">center = #{center,jdbcType=VARCHAR}, </if>
		<if test="regionMark!= null and regionMark!='' "> region_mark = #{regionMark,jdbcType=VARCHAR}, </if>
		<if test="styleId!= null">style_id = #{styleId,jdbcType=INTEGER}, </if>
		<if test="measureCode!= null and measureCode!='' ">measure_code = #{measureCode,jdbcType=VARCHAR}, </if>
		<if test="describeInfo!= null and describeInfo!=''">describe_info = #{describeInfo,jdbcType=VARCHAR}, </if>
		<if test="productIndex!= null">product_index = #{productIndex,jdbcType=INTEGER}, </if>
		<if test="isMainStructureProduct!= null"> is_main_structure_product = #{isMainStructureProduct,jdbcType=INTEGER}, </if>
		<if test="isGroupReplaceWay!= null"> is_group_replace_way = #{isGroupReplaceWay,jdbcType=INTEGER}, </if>
		<if test="wallOrientation!= null"> wall_orientation = #{wallOrientation,jdbcType=VARCHAR}, </if>
		<if test="wallType!= null"> wall_type = #{wallType,jdbcType=VARCHAR}, </if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<resultMap id="designPlanModelMap" type="com.nork.design.model.DesignPlanModel">
		<id column="id" property="designPlanId" jdbcType="INTEGER"/>
		<result column="plan_code" property="planCode" jdbcType="VARCHAR"/>
		<result column="plan_name" property="planName" jdbcType="VARCHAR"/>
		<result column="plan_source" property="planSource" jdbcType="VARCHAR"/>
		<result column="residential_units_name" property="residentialUnitsName" jdbcType="VARCHAR"/>
		<result column="model_id" property="modelId" jdbcType="INTEGER"/>
		<result column="space_function_id" property="spaceFunctionId" jdbcType="INTEGER"/>
		<result column="config_file_id" property="configFileId" jdbcType="INTEGER"/>
		<result column="space_common_id" property="spaceCommonId" jdbcType="INTEGER"/>
		<result column="design_template_id" property="designTemplateId" jdbcType="INTEGER"/>
		<result column="model_path" property="modelPath" jdbcType="VARCHAR"/>
		<result column="file_path" property="filePath" jdbcType="VARCHAR"/>
		<result column="design_code" property="designTempletCode" jdbcType="VARCHAR"/>
		<result column="space_code" property="spaceCode" jdbcType="VARCHAR"/>
		<result column="space_name" property="spaceName" jdbcType="VARCHAR"/>
		<result column="space_areas" property="spaceAreas" jdbcType="VARCHAR"/>
		<result column="value" property="houseTypeValue" jdbcType="INTEGER"/>
		<result column="name" property="houseTypeName" jdbcType="VARCHAR"/>
		<result column="daylight_u3d_model_id" property="daylightU3dModelId" jdbcType="INTEGER"/>
		<result column="dusklight_u3d_model_id" property="dusklightU3dModelId" jdbcType="INTEGER"/>
		<result column="nightlight_u3d_model_id" property="nightlightU3dModelId" jdbcType="INTEGER"/>
	</resultMap>
	
	
	
	<select id="selectDesignPlanInfo" resultType="com.nork.design.model.DesignPlanModel" parameterType="java.lang.Integer">
		SELECT
		 dp.id designPlanId,
		 dp.residential_units_name residentialUnitsName,
		 dp.plan_source planSource,
		 dp.plan_code planCode,
		 dp.plan_name planName,
		 dp.model_id modelId,
		 dp.config_file_id configFileId,
		 dp.space_common_id spaceCommonId,
		 dp.design_template_id AS designTemplateId,
		 rm.model_path modelPath,
		 rf.file_path filePath,
		 dt.design_code AS designTempletCode,
		 sc.space_code spaceCode,
		 sc.space_name spaceName,
		 sc.space_areas spaceAreas,
		 sc.daylight_u3d_model_id daylightU3dModelId,
		 sc.dusklight_u3d_model_id dusklightU3dModelId,
		 sc.nightlight_u3d_model_id nightlightU3dModelId,
		 sd.value houseTypeValue,
		 sd.name houseTypeName
		FROM onekey_decoration_design_plan dp

		LEFT JOIN res_model rm ON rm.`id` = dp.`model_id` AND rm.`is_deleted` = 0

		LEFT JOIN onekey_decoration_res_design rf ON rf.`id` = dp.`config_file_id` AND rf.`is_deleted` = 0

		LEFT JOIN design_templet dt ON dt.`id` = dp.`design_template_id` AND dt.`is_deleted` = 0

		LEFT JOIN space_common sc ON sc.`id` = dp.`space_common_id` AND sc.`is_deleted` = 0

		LEFT JOIN sys_dictionary sd ON (sc.`space_function_id` = sd.`value` AND sd.`type` = 'houseType' AND sd.`is_deleted` = 0)

		WHERE dp.is_deleted = 0 and dp.id = #{id,jdbcType=INTEGER}
	</select>
	
	<!-- **删除定义** -->
	<delete id="deleteByPlanKey" parameterType="java.lang.Integer">
		delete from onekey_decoration_design_plan
		where id = #{id,jdbcType=INTEGER}
	</delete>
	
	<!-- ******************************分割线************************** -->
	<!-- 结算大类型清单 -->
	<resultMap id="costTypeListResult" type="com.nork.design.model.ProductsCostType">
		<result column="costCodes" property="costCodes" jdbcType="VARCHAR"/>
		<result column="totalPrice" property="totalPrice" jdbcType="DECIMAL"/>
		<result column="costTypeValue" property="costTypeValue" jdbcType="VARCHAR"/>
		<result column="costTypeCode" property="costTypeCode" jdbcType="VARCHAR"/>
		<result column="costTypeName" property="costTypeName" jdbcType="VARCHAR"/>
	</resultMap>
	<!-- 结算清单 -->
	<resultMap id="costListResult" type="com.nork.design.model.ProductsCost">
		<result column="productIds" property="productIds" jdbcType="VARCHAR"/>
		<result column="totalPrice" property="totalPrice" jdbcType="DECIMAL"/>
		<result column="costTypeValue" property="costTypeValue" jdbcType="VARCHAR"/>
		<result column="costTypeCode" property="costTypeCode" jdbcType="VARCHAR"/>
		<result column="costTypeName" property="costTypeName" jdbcType="VARCHAR"/>
		<result column="productCount" property="productCount" jdbcType="INTEGER"/>
	</resultMap>
	<!-- 结算清单明细 -->
	<resultMap id="costDetailResult" type="com.nork.design.model.ProductCostDetail">
		<id column="id" property="productId" jdbcType="VARCHAR"/>
		<result column="product_name" property="productName" jdbcType="VARCHAR"/>
		<result column="brand_name" property="brandName" jdbcType="VARCHAR"/>
		<result column="unitPrice" property="unitPrice" jdbcType="DECIMAL"/>
		<result column="totalPrice" property="totalPrice" jdbcType="DECIMAL"/>
		<result column="totalCount" property="count" jdbcType="INTEGER"/>
		<result column="productPicPath" property="productPicPath" jdbcType="VARCHAR"/>
		<result column="productModelNumber" property="productModelNumber" jdbcType="VARCHAR"/>
		<result column="productSpec" property="productSpec" jdbcType="VARCHAR"/>
		<result column="productDesc" property="productDesc" jdbcType="VARCHAR"/>
		<result column="productOriginalPicPath" property="productOriginalPicPath" jdbcType="VARCHAR"/>
		<result column="productUnit" property="productUnit" jdbcType="VARCHAR"/>
		<result column="productCode" property="productCode" jdbcType="VARCHAR"/>
		<result column="posIndexPath" property="posIndexPath" jdbcType="VARCHAR"/>
		
		<result column="productTypeValue" property="productTypeValue" jdbcType="VARCHAR"/>
		<result column="productSmallTypeValue" property="productSmallTypeValue" jdbcType="VARCHAR"/>
		<result column="planProductId" property="planProductId" jdbcType="INTEGER"/>
		<result column="isMainProduct" property="isMainProduct" jdbcType="INTEGER"/>
		<result column="productTypeValue" property="productTypeValue" jdbcType="VARCHAR"/>
		<result column="productSmallTypeValue" property="productSmallTypeValue" jdbcType="VARCHAR"/>
		<result column="spaceCommonId" property="spaceCommonId" jdbcType="INTEGER"/>
		
		<result column="sourcePlanGroupId" property="sourcePlanGroupId" jdbcType="VARCHAR"/>
		<result column="sourceProductGroupId" property="sourceProductGroupId" jdbcType="INTEGER"/>
		<result column="sourceGroupProductUniqueId" property="sourceGroupProductUniqueId" jdbcType="VARCHAR"/>
		<result column="sourceGroupProductId" property="sourceGroupProductId" jdbcType="INTEGER"/>
		<result column="sourceGroupProductCode" property="sourceGroupProductCode" jdbcType="VARCHAR"/>
		<result column="split_textures_choose_info" property="sourceSplitTexturesChooseInfo" jdbcType="VARCHAR"/>
		<result column="is_standard" property="isStandard" jdbcType="INTEGER"/>
		<result column="region_mark" property="regionMark" jdbcType="VARCHAR"/>
		<result column="style_id" property="styleId" jdbcType="INTEGER"/>
		<result column="measure_code" property="measureCode" jdbcType="VARCHAR"/>
		<result column="structure_id" property="structureId" jdbcType="INTEGER"/>
		<result column="valuekey" property="valuekey" jdbcType="VARCHAR"/>
		<result column="designTemplet_id" property="designTempletId" jdbcType="INTEGER"/>
		<result column="pro_category_id" property="proCategoryId" jdbcType="INTEGER"/>
		<result column="pro_category_long_code" property="proCategoryLongCode" jdbcType="VARCHAR"/>
		<result column="att2" property="att2" jdbcType="VARCHAR"/>
		<result column="typeValue" property="typeValue" jdbcType="VARCHAR"/>
		<result column="brandId" property="brandId" jdbcType="INTEGER"/>
		<result column="secrecy_flag" property="secrecyFlag" jdbcType="INTEGER"/>
		<result column="company_id" property="companyId" jdbcType="INTEGER"/>
	</resultMap>
	<!-- 结算汇总清单 -->
	<select id="costTypeListCount" resultType="int" parameterType="com.nork.design.model.DesignPlanProduct">
		SELECT  COUNT(*)  FROM
		(SELECT GROUP_CONCAT(C.costTypeCode) costCodes,SUM(C.totalPrice) totalPrice ,s2.value costTypeValue,s2.valuekey costTypeCode,s2.name costTypeName
		FROM 
		(SELECT GROUP_CONCAT(bp.id) productIds,SUM(bp.sale_price) totalPrice,s3.value costTypeValue,s3.valuekey costTypeCode,s3.name costTypeName FROM onekey_decoration_design_plan_product dp
		<if test="platformId != null">
			LEFT JOIN platform2b_product_rel AS ppr ON ppr.product_id = dp.product_id
		</if>
		LEFT JOIN base_product bp ON bp.id = dp.product_id
		LEFT JOIN (SELECT bs.type,bs.valuekey,bs.value,bs.name,bs.ordering FROM sys_dictionary bs WHERE bs.type = 'productType' ORDER BY bs.ordering) s1 ON bp.product_type_value = s1.value
		LEFT JOIN sys_dictionary s2 ON s2.value = bp.product_small_type_value AND s2.type = s1.valuekey
		LEFT JOIN (SELECT tal.type,tal.valuekey,tal.value,tal.name,tal.ordering FROM sys_dictionary tal WHERE tal.type = 'total' ORDER BY tal.ordering) s3 ON s3.valuekey = s2.att2
		WHERE 1=1  AND dp.is_deleted = 0
		<!--添加平台过滤  上架已发布状态-->
		<if test="platformId != null">
			AND ppr.platform_id = #{platformId,jdbcType=INTEGER} AND ppr.putaway_state = 1 AND ppr.allot_state = 1
		</if>
		<if test="planId != null and planId != ''">
			AND dp.plan_id = #{planId,jdbcType=INTEGER}
		</if>
			<!-- 新过滤逻辑(品牌,大类,小类,产品idList) -->
			<if test="baseProduct !=  null and  baseProduct.size > 0  ">
				and (
				<foreach collection="baseProduct" index="index" item="item">
					<choose>
						<when test="index== 0">
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</when>
						<otherwise>
							or 
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</otherwise>
					</choose>

				</foreach>
				)
			</if>
			<!-- 新过滤逻辑(品牌,大类,小类,产品idList)->end -->
		AND s2.att3 != 'baimo'
		GROUP BY s2.att2
		ORDER BY s3.ordering,s2.ordering) C
		LEFT JOIN 
   		  (SELECT  bs.type, bs.valuekey, bs.value, bs.name, bs.ordering, bs.att1 
        FROM  sys_dictionary bs 
   		WHERE bs.type = 'total' 
    	ORDER BY bs.ordering) s1 
    	ON C.costTypeCode = s1.valuekey 
        LEFT JOIN 
    		(SELECT  sd.type, sd.valuekey, sd.value, sd.name, sd.ordering
    	FROM sys_dictionary sd 
    	WHERE sd.type = 'totalType' 
    	ORDER BY sd.ordering) s2 
    	ON s1.att1 = s2.valuekey 
    	WHERE 1 = 1
    	AND s1.att1 IS NOT NULL
    	GROUP BY s1.att1) t
	</select>
	
	<select id="costTypeList" resultMap="costTypeListResult" parameterType="com.nork.design.model.DesignPlanProduct">
		SELECT GROUP_CONCAT(C.costTypeCode) costCodes,SUM(C.totalPrice) totalPrice ,s2.value costTypeValue,s2.valuekey costTypeCode,s2.name costTypeName
		FROM 
		(SELECT GROUP_CONCAT(bp.id) productIds,SUM(bp.sale_price) totalPrice,s3.value costTypeValue,s3.valuekey costTypeCode,s3.name costTypeName FROM onekey_decoration_design_plan_product dp
		<!--<if test="platformId != null">-->
			<!--LEFT JOIN platform2b_product_rel AS ppr ON ppr.product_id = dp.product_id-->
		<!--</if>-->
		LEFT JOIN base_product bp ON bp.id = dp.product_id
		LEFT JOIN (SELECT bs.type,bs.valuekey,bs.value,bs.name,bs.ordering FROM sys_dictionary bs WHERE bs.type = 'productType' ORDER BY bs.ordering) s1 ON bp.product_type_value = s1.value
		LEFT JOIN sys_dictionary s2 ON s2.value = bp.product_small_type_value AND s2.type = s1.valuekey
		LEFT JOIN (SELECT tal.type,tal.valuekey,tal.value,tal.name,tal.ordering FROM sys_dictionary tal WHERE tal.type = 'total' ORDER BY tal.ordering) s3 ON s3.valuekey = s2.att2
		WHERE 1=1  AND dp.is_deleted = 0
		<!--添加平台过滤  上架已发布状态-->
		<!--<if test="platformId != null">-->
			<!--AND ppr.platform_id = #{platformId,jdbcType=INTEGER} AND ppr.putaway_state = 1 AND ppr.allot_state = 1-->
		<!--</if>-->
		<if test="planId != null and planId != ''">
			AND dp.plan_id = #{planId,jdbcType=INTEGER}
		</if>
			<!-- 新过滤逻辑(品牌,大类,小类,产品idList) -->
			<if test="baseProduct !=  null and  baseProduct.size > 0  ">
				and (
				<foreach collection="baseProduct" index="index" item="item">
					<choose>
						<when test="index== 0">
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</when>
						<otherwise>
							or 
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</otherwise>
					</choose>

				</foreach>
				)
			</if>
			<!-- 新过滤逻辑(品牌,大类,小类,产品idList)->end -->
		AND s2.att3 != 'baimo'
		GROUP BY s2.att2
		ORDER BY s3.ordering,s2.ordering) C
		LEFT JOIN 
   		  (SELECT  bs.type, bs.valuekey, bs.value, bs.name, bs.ordering, bs.att1 
        FROM  sys_dictionary bs 
   		WHERE bs.type = 'total' 
    	ORDER BY bs.ordering) s1 
    	ON C.costTypeCode = s1.valuekey 
        LEFT JOIN 
    		(SELECT  sd.type, sd.valuekey, sd.value, sd.name, sd.ordering
    	FROM sys_dictionary sd 
    	WHERE sd.type = 'totalType' 
    	ORDER BY sd.ordering) s2 
    	ON s1.att1 = s2.valuekey 
    	WHERE 1 = 1
    	AND s1.att1 IS NOT NULL
    	GROUP BY s1.att1 
		<if test="start !=-1 and limit !=-1"> LIMIT #{start}, #{limit}</if>
	</select>
	
	<select id="costList" resultMap="costListResult" parameterType="com.nork.design.model.ProductsCostType">
		SELECT GROUP_CONCAT(bp.id) productIds,SUM(bp.sale_price) totalPrice,s3.value costTypeValue,s3.valuekey costTypeCode,s3.name costTypeName,COUNT(bp.id) productCount FROM onekey_decoration_design_plan_product dp
		LEFT JOIN base_product bp ON bp.id = dp.product_id
		LEFT JOIN (SELECT bs.type,bs.valuekey,bs.value,bs.name,bs.ordering FROM sys_dictionary bs WHERE bs.type = 'productType' ORDER BY bs.ordering) s1 ON bp.product_type_value = s1.value
		LEFT JOIN sys_dictionary s2 ON s2.value = bp.product_small_type_value AND s2.type = s1.valuekey
		LEFT JOIN (SELECT tal.type,tal.valuekey,tal.value,tal.name,tal.ordering FROM sys_dictionary tal WHERE tal.type = 'total' ORDER BY tal.ordering) s3 ON s3.valuekey = s2.att2
		WHERE 1=1  AND dp.is_deleted = 0
		<if test="planId != null and planId != ''">
			AND dp.plan_id = #{planId,jdbcType=INTEGER}
		</if>
		<if test="costCodes != null and costCodes != ''">
			AND FIND_IN_SET(s3.valuekey, #{costCodes,jdbcType=VARCHAR})
		</if>
					<!-- 新过滤逻辑(品牌,大类,小类,产品idList) -->
			<if test="baseProduct !=  null and  baseProduct.size > 0  ">
				and (
				<foreach collection="baseProduct" index="index" item="item">
					<choose>
						<when test="index== 0">
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</when>
						<otherwise>
							or 
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</otherwise>
					</choose>

				</foreach>
				)
			</if>
			<!-- 新过滤逻辑(品牌,大类,小类,产品idList)->end -->
		AND s2.att3 != 'baimo'
		GROUP BY s2.att2
		ORDER BY s3.ordering,s2.ordering
		<if test="start !=-1 and limit !=-1"> LIMIT #{start}, #{limit}</if>
	</select>
	
	<!-- 结算清单明细 -->
	<select id="costDetail" resultMap="costDetailResult" parameterType="com.nork.design.model.ProductsCost">
		SELECT bp.id,bp.product_name,bb.brand_name,bp.sale_price unitPrice,(bp.sale_price*COUNT(bp.id)) totalPrice,COUNT(bp.id) totalCount,rp.pic_path productPicPath,
		bp.product_model_number productModelNumber,bp.product_spec productSpec,product_desc productDesc,rp1.pic_path productOriginalPicPath,sd.name productUnit,bp.product_code productCode
		,dp.pos_index_path as posIndexPath        	  <!-- 挂节点 -->
		,dp.is_main_product as isMainProduct      	  <!-- 是否是主产品 -->
		,dp.id as planProductId						  <!-- 方案产品id -->
		,dp2.space_common_id as spaceCommonId			  <!-- 空间id -->
		,bp.product_type_mark as categoryCode		  <!-- 产品分类编码 -->
		,bp.product_small_type_mark as smallCategoryCode<!-- 产品小分类编码 -->
		,bp.product_type_value as productTypeValue		<!-- 产品类别value···大类 -->
		,bp.product_small_type_value as productSmallTypeValue  <!-- 产品类别value···小类 -->
		
		,dp.plan_group_id as sourcePlanGroupId          	  <!-- 设计方案组合ID-->
		,dp.product_group_id as sourceProductGroupId  	  <!-- 产品组合ID -->
		,dp.group_product_uniqueId as sourceGroupProductUniqueId		<!-- 组合产品唯一标识 -->
		,gp.id as sourceGroupProductId			<!-- 组合id -->
		,gp.group_code as sourceGroupProductCode	<!-- 组合code -->
		,dp.split_textures_choose_info <!-- 默认材质信息  -->
		,dp.is_standard		<!-- 描述(区域、尺寸代码) -->
		,dp.region_mark		<!-- 区域标识 -->
		,dp.style_id		<!-- 款式id -->
		,dp.measure_code	<!-- 尺寸代码 -->
		,gp.structure_id	<!-- 结构id -->
		,s2.valuekey
		,dp2.design_template_id as designTemplet_id	<!-- 关联样板房id -->
		,pc.id as pro_category_id					<!-- 产品分类id -->
		,pc.long_code as pro_category_long_code		<!-- 产品分类长编码 -->
		,s2.att2 as att2
		,bp.product_type_value as typeValue
		,bp.brand_id as brandId
		,bp.secrecy_flag
		,bb.company_id

		FROM onekey_decoration_design_plan_product dp
		LEFT JOIN base_product bp ON bp.id = dp.product_id
		<if test="platformId != null">
			LEFT JOIN platform2b_product_rel AS ppr ON ppr.product_id = dp.product_id
		</if>
		left join pro_category pc on bp.product_small_type_mark = pc.code
		LEFT JOIN (SELECT bs.type,bs.valuekey,bs.value,bs.name,bs.ordering FROM sys_dictionary bs WHERE bs.type = 'productType' ORDER BY bs.ordering) s1 ON bp.product_type_value = s1.value
		LEFT JOIN sys_dictionary s2 ON s2.value = bp.product_small_type_value AND s2.type = s1.valuekey
		LEFT JOIN res_pic rp ON bp.pic_id = rp.id
		LEFT JOIN res_pic rp1 ON bp.pic_ids = rp1.id
		LEFT JOIN base_brand bb ON bb.id = bp.brand_id
		LEFT JOIN sys_dictionary sd on sd.value = bp.sale_price_value and sd.type='productUnitPrice'
		LEFT JOIN group_product gp on gp.id = dp.product_group_id
		LEFT JOIN onekey_decoration_design_plan dp2 ON dp2.id = dp.plan_id
		WHERE 1=1 AND dp.is_deleted = 0
		<!--添加平台过滤  上架已发布状态-->
		<if test="platformId != null">
			AND ppr.platform_id = #{platformId,jdbcType=INTEGER} AND ppr.putaway_state = 1 AND ppr.allot_state = 1
		</if>
		<if test="planId != null and planId != ''">
			AND dp.plan_id = #{planId,jdbcType=INTEGER}
		</if>
		<if test="costTypeCode != null and costTypeCode != ''">
			AND s2.att2 = #{costTypeCode,jdbcType=VARCHAR}
		</if>
					<!-- 新过滤逻辑(品牌,大类,小类,产品idList) -->
			<if test="baseProduct !=  null and  baseProduct.size > 0  ">
				and (
				<foreach collection="baseProduct" index="index" item="item">
					<choose>
						<when test="index== 0">
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</when>
						<otherwise>
							or 
							<choose>
								<when test="item.productIdList!=null and item.productIdList.size>0">
									(bp.id in
										 <foreach collection="item.productIdList" index="indexProductId" item="itemProductId" open="(" separator="," close=")">
										 	#{itemProductId}
										 </foreach>
									)
								</when>
								<otherwise>
									<!-- 品牌&&大小类 -->
									(<!-- 1=1  -->
									<if test="item.brandId != null and item.brandId != 0 ">
										<!-- and  -->bp.brand_id=#{item.brandId}
									</if>
									<if test="item.productTypeValue != null and item.productTypeValue != '' ">
										and bp.product_type_value=#{item.productTypeValue}
									</if>
									<if test="item.productSmallTypeValue != null and item.productSmallTypeValue != '' ">
										and bp.product_small_type_value=#{item.productSmallTypeValue}
									</if>
									)
									<!-- 品牌||大小类 -->
								</otherwise>
							</choose>
						</otherwise>
					</choose>

				</foreach>
				)
			</if>
			<!-- 新过滤逻辑(品牌,大类,小类,产品idList)->end -->
		AND s2.att3 != 'baimo'
		GROUP BY bp.id
		<if test="start !=-1 and limit !=-1"> LIMIT #{start}, #{limit}</if>
	</select>
	
	<!-- **更新定义** -->
	<update id="updateByPrimaryKeyPic" parameterType="com.nork.system.model.ResRenderPic">
		update auto_render_res_render_pic
		<set>
		<if test="businessId!= null">  business_id = #{businessId,jdbcType=INTEGER}, </if>
		<if test="picCode!= null">  pic_code = #{picCode,jdbcType=VARCHAR}, </if>
		<if test="sysTaskPicId!= null">  sys_task_pic_id = #{sysTaskPicId,jdbcType=INTEGER}, </if>
		<if test="picName!= null">  pic_name = #{picName,jdbcType=VARCHAR}, </if>
		<if test="picFileName!= null">  pic_file_name = #{picFileName,jdbcType=VARCHAR}, </if>
		<if test="picType!= null">  pic_type = #{picType,jdbcType=VARCHAR}, </if>
		<if test="picSize!= null">  pic_size = #{picSize,jdbcType=INTEGER}, </if>
		<if test="picWeight!= null">  pic_weight = #{picWeight,jdbcType=INTEGER}, </if>
		<if test="picHigh!= null">  pic_high = #{picHigh,jdbcType=INTEGER}, </if>
		<if test="picSuffix!= null">  pic_suffix = #{picSuffix,jdbcType=VARCHAR}, </if>
		<if test="picLevel!= null">  pic_level = #{picLevel,jdbcType=INTEGER}, </if>
		<if test="picFormat!= null">  pic_format = #{picFormat,jdbcType=VARCHAR}, </if>
		<if test="picPath!= null">  pic_path = #{picPath,jdbcType=VARCHAR}, </if>
		<if test="picDesc!= null">  pic_desc = #{picDesc,jdbcType=VARCHAR}, </if>
		<if test="picOrdering!= null">  pic_ordering = #{picOrdering,jdbcType=INTEGER}, </if>
		<if test="fileKey!= null">  file_key = #{fileKey,jdbcType=VARCHAR}, </if>
		<if test="fileKeys!= null">  file_keys = #{fileKeys,jdbcType=VARCHAR}, </if>
		<if test="smallPicInfo!= null">  small_pic_info = #{smallPicInfo,jdbcType=VARCHAR}, </if>
		<if test="viewPoint!= null">  view_point = #{viewPoint,jdbcType=INTEGER}, </if>
		<if test="scene!= null">  scene = #{scene,jdbcType=INTEGER}, </if>
		<if test="renderingType!= null">  rendering_type = #{renderingType,jdbcType=INTEGER}, </if>
		<if test="sequence!= null">  sequence = #{sequence,jdbcType=INTEGER}, </if>
		<if test="panoPath!= null">  pano_path = #{panoPath,jdbcType=VARCHAR}, </if>
		<if test="taskCreateTime!= null">  task_create_time = #{taskCreateTime,jdbcType=TIMESTAMP}, </if>
		<if test="pid!= null">  pid = #{pid,jdbcType=INTEGER}, </if>
		<if test="sysCode!= null">  sys_code = #{sysCode,jdbcType=VARCHAR}, </if>
		<if test="creator!= null">  creator = #{creator,jdbcType=VARCHAR}, </if>
		<if test="gmtCreate!= null">  gmt_create = #{gmtCreate,jdbcType=TIMESTAMP}, </if>
		<if test="modifier!= null">  modifier = #{modifier,jdbcType=VARCHAR}, </if>
		<if test="gmtModified!= null">  gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}, </if>
		<if test="isDeleted!= null">  is_deleted = #{isDeleted,jdbcType=INTEGER}, </if>
		<if test="att1!= null">  att1 = #{att1,jdbcType=VARCHAR}, </if>
		<if test="att2!= null">  att2 = #{att2,jdbcType=VARCHAR}, </if>
		<if test="numa1!= null">  numa1 = #{numa1,jdbcType=INTEGER}, </if>
		<if test="numa2!= null">  numa2 = #{numa2,jdbcType=INTEGER}, </if>
		<if test="remark!= null">  remark = #{remark,jdbcType=VARCHAR}, </if>
		<if test="panoLevel!= null">  pano_level = #{panoLevel,jdbcType=INTEGER}, </if>
		<if test="roam!= null">  roam = #{roam,jdbcType=VARCHAR}, </if>
		<if test="designSceneId!= null"> design_scene_id = #{designSceneId,jdbcType=INTEGER} </if>
		<if test="sourcePlanId!= null"> source_plan_id = #{sourcePlanId,jdbcType=INTEGER}, </if>
		<if test="templateId!= null"> source_template_id = #{templateId,jdbcType=INTEGER}, </if>
		<if test="planRecommendedId!= null">plan_recommended_id = #{planRecommendedId,jdbcType=INTEGER}, </if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
 	<!-- **结果定义** -->
	<!--
	<resultMap id="AllResultMap8" type="com.nork.system.model.ResRenderPic">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result  column="plan_recommended_id" property="planRecommendedId" jdbcType="INTEGER" />
		<result  column="business_id" property="businessId" jdbcType="INTEGER" />
		<result  column="pic_code" property="picCode" jdbcType="VARCHAR" />
		<result  column="pic_name" property="picName" jdbcType="VARCHAR" />
		<result  column="pic_file_name" property="picFileName" jdbcType="VARCHAR" />
		<result  column="pic_type" property="picType" jdbcType="VARCHAR" />
		<result  column="pic_size" property="picSize" jdbcType="INTEGER" />
		<result  column="pic_weight" property="picWeight" jdbcType="INTEGER" />
		<result  column="pic_high" property="picHigh" jdbcType="INTEGER" />
		<result  column="pic_suffix" property="picSuffix" jdbcType="VARCHAR" />
		<result  column="pic_level" property="picLevel" jdbcType="INTEGER" />
		<result  column="pic_format" property="picFormat" jdbcType="VARCHAR" />
		<result  column="pic_path" property="picPath" jdbcType="VARCHAR" />
		<result  column="pic_desc" property="picDesc" jdbcType="VARCHAR" />
		<result  column="pic_ordering" property="picOrdering" jdbcType="INTEGER" />
		<result  column="file_key" property="fileKey" jdbcType="VARCHAR" />
		<result  column="file_keys" property="fileKeys" jdbcType="VARCHAR" />
		<result  column="small_pic_info" property="smallPicInfo" jdbcType="VARCHAR" />
		<result  column="view_point" property="viewPoint" jdbcType="INTEGER" />
		<result  column="scene" property="scene" jdbcType="INTEGER" />
		<result  column="rendering_type" property="renderingType" jdbcType="INTEGER" />
		<result  column="sequence" property="sequence" jdbcType="INTEGER" />
		<result  column="pano_path" property="panoPath" jdbcType="VARCHAR" />
		<result  column="task_create_time" property="taskCreateTime" jdbcType="TIMESTAMP" />
		<result  column="pid" property="pid" jdbcType="INTEGER" />
		<result  column="sys_code" property="sysCode" jdbcType="VARCHAR" />
		<result  column="creator" property="creator" jdbcType="VARCHAR" />
		<result  column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
		<result  column="modifier" property="modifier" jdbcType="VARCHAR" />
		<result  column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
		<result  column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
		<result  column="att1" property="att1" jdbcType="VARCHAR" />
		<result  column="att2" property="att2" jdbcType="VARCHAR" />
		<result  column="numa1" property="numa1" jdbcType="INTEGER" />
		<result  column="numa2" property="numa2" jdbcType="INTEGER" />
		<result  column="remark" property="remark" jdbcType="VARCHAR" />
		<result  column="sys_task_pic_id" property="sysTaskPicId" jdbcType="INTEGER" />
		<result  column="pano_level" property="panoLevel" jdbcType="INTEGER" />
		<result  column="roam" property="roam" jdbcType="VARCHAR" />
		<result  column="design_scene_id" property="designSceneId" jdbcType="INTEGER" />
		<result  column="source_plan_id" property="sourcePlanId" jdbcType="INTEGER" />
		<result  column="source_template_id" property="templateId" jdbcType="INTEGER" />
		<result  column="create_user_id" property="createUserId" jdbcType="INTEGER" />
	</resultMap>
	**常量定义**
	<sql id="All_Column_List8">
		id,create_user_id,plan_recommended_id,business_id,sys_task_pic_id,pic_code,pic_name,pic_file_name,
		pic_type,pic_size,pic_weight,pic_high,pic_suffix,pic_level,pic_format,pic_path,pic_desc,pic_ordering,
		file_key,file_keys,small_pic_info,view_point,scene,rendering_type,sequence,pano_path,task_create_time,pid,sys_code,creator,
		gmt_create,modifier,gmt_modified,is_deleted,att1,att2,numa1,numa2,remark,pano_level,roam,source_template_id,source_plan_id,design_scene_id
	</sql>
	<select id="selectBySysCodeAndBusinessId" resultMap="AllResultMap8"
		parameterType="java.lang.Integer">
		select
		<include refid="All_Column_List8" />
		from res_render_pic
		where 
		 business_id = #{businessId,jdbcType=INTEGER}
		 and sys_code = #{sysCode,jdbcType=VARCHAR}
		 and  is_deleted=0 
	</select> -->
	<select id="countOnekeyDesignPlan" resultType="java.lang.Integer"
		parameterType="com.nork.system.model.ResRenderPic">
		select count(1)
			from res_render_pic
		where 
		 business_id = #{businessId,jdbcType=INTEGER}
		 and sys_code = #{sysCode,jdbcType=VARCHAR}
		 and  is_deleted=0 
	</select>
		<resultMap id="AllResultMap9" type="com.nork.system.model.ResRenderPic">
		<id column="id" property="id" jdbcType="INTEGER" />
 
		<result  column="plan_recommended_id" property="planRecommendedId" jdbcType="INTEGER" />
		<result  column="business_id" property="businessId" jdbcType="INTEGER" />
		<result  column="pic_code" property="picCode" jdbcType="VARCHAR" />
		<result  column="pic_name" property="picName" jdbcType="VARCHAR" />
		<result  column="pic_file_name" property="picFileName" jdbcType="VARCHAR" />
		<result  column="pic_type" property="picType" jdbcType="VARCHAR" />
		<result  column="pic_size" property="picSize" jdbcType="INTEGER" />
		<result  column="pic_weight" property="picWeight" jdbcType="INTEGER" />
		<result  column="pic_high" property="picHigh" jdbcType="INTEGER" />
		<result  column="pic_suffix" property="picSuffix" jdbcType="VARCHAR" />
		<result  column="pic_level" property="picLevel" jdbcType="INTEGER" />
		<result  column="pic_format" property="picFormat" jdbcType="VARCHAR" />
		<result  column="pic_path" property="picPath" jdbcType="VARCHAR" />
		<result  column="pic_desc" property="picDesc" jdbcType="VARCHAR" />
		<result  column="pic_ordering" property="picOrdering" jdbcType="INTEGER" />
		<result  column="file_key" property="fileKey" jdbcType="VARCHAR" />
		<result  column="file_keys" property="fileKeys" jdbcType="VARCHAR" />
		<result  column="small_pic_info" property="smallPicInfo" jdbcType="VARCHAR" />
		<result  column="view_point" property="viewPoint" jdbcType="INTEGER" />
		<result  column="scene" property="scene" jdbcType="INTEGER" />
		<result  column="rendering_type" property="renderingType" jdbcType="INTEGER" />
		<result  column="sequence" property="sequence" jdbcType="INTEGER" />
		<result  column="pano_path" property="panoPath" jdbcType="VARCHAR" />
		<result  column="task_create_time" property="taskCreateTime" jdbcType="TIMESTAMP" />
		<result  column="pid" property="pid" jdbcType="INTEGER" />
		<result  column="sys_code" property="sysCode" jdbcType="VARCHAR" />
		<result  column="creator" property="creator" jdbcType="VARCHAR" />
		<result  column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
		<result  column="modifier" property="modifier" jdbcType="VARCHAR" />
		<result  column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
		<result  column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
		<result  column="att1" property="att1" jdbcType="VARCHAR" />
		<result  column="att2" property="att2" jdbcType="VARCHAR" />
		<result  column="numa1" property="numa1" jdbcType="INTEGER" />
		<result  column="numa2" property="numa2" jdbcType="INTEGER" />
		<result  column="remark" property="remark" jdbcType="VARCHAR" />
		<result  column="sys_task_pic_id" property="sysTaskPicId" jdbcType="INTEGER" />
		<result  column="pano_level" property="panoLevel" jdbcType="INTEGER" />
		<result  column="roam" property="roam" jdbcType="VARCHAR" />
		<result  column="design_scene_id" property="designSceneId" jdbcType="INTEGER" />
		<result  column="source_plan_id" property="sourcePlanId" jdbcType="INTEGER" />
		<result  column="source_template_id" property="templateId" jdbcType="INTEGER" />
		<result  column="create_user_id" property="createUserId" jdbcType="INTEGER" />
		<result  column="platform_id" property="platformId" jdbcType="INTEGER" />
		<result  column="camera_location" property="cameraLocation" jdbcType="VARCHAR" />
	</resultMap>
	
	<!-- **常量定义** -->
	<sql id="All_Column_List9">
		id,create_user_id,plan_recommended_id,business_id,sys_task_pic_id,pic_code,pic_name,pic_file_name,
		pic_type,pic_size,pic_weight,pic_high,pic_suffix,pic_level,pic_format,pic_path,pic_desc,pic_ordering,
		file_key,file_keys,small_pic_info,view_point,scene,rendering_type,sequence,pano_path,task_create_time,pid,
		sys_code,creator,gmt_create,modifier,gmt_modified,is_deleted,att1,att2,numa1,numa2,remark,pano_level,
		roam,source_template_id,source_plan_id,design_scene_id,platform_id,camera_location
	</sql>
	
   <select id="selectByPlanIdAndTemplateId" resultMap="AllResultMap9"
	parameterType="java.lang.Integer">
	select
	<include refid="All_Column_List9" />
	from auto_render_res_render_pic
       where 1=1
        and source_plan_id = #{planRecommendedId,jdbcType=INTEGER}
		and source_template_id = #{templateId,jdbcType=INTEGER}
		and rendering_type = #{renderingType,jdbcType=INTEGER}
		and is_deleted = 0
		and file_key in 
			('auto.design.designPlan.render.pic' , 'auto.design.designPlan.render.video.cover')
		ORDER BY gmt_create desc
    </select>
    
    
    <select id = "selectAutoPicByBusinessId" resultMap="AllResultMap9" parameterType="java.lang.Integer">
    	select
		<include refid="All_Column_List9" />
		from auto_render_res_render_pic
      	where business_id = #{businessId}
    </select>
    
    <!-- **自动渲染的视频的常量定义** -->
	<sql id="auto_render_video">
		id,business_id,video_code,video_name,video_file_name,video_type,video_size,video_suffix,video_level,video_format,video_path,video_desc,video_ordering,file_key,file_keys,small_video_info,rendering_type,sequence,task_create_time,sys_task_pic_id,sys_code,creator,gmt_create,modifier,gmt_modified,is_deleted,att1,att2,numa1,numa2,remark
	</sql>
	<!-- **自动渲染的视频的结果定义** -->
	<resultMap id="AutoVideoMap" type="com.nork.system.model.ResRenderVideo">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result  column="business_id" property="businessId" jdbcType="INTEGER" />
		<result  column="video_code" property="videoCode" jdbcType="VARCHAR" />
		<result  column="video_name" property="videoName" jdbcType="VARCHAR" />
		<result  column="video_file_name" property="videoFileName" jdbcType="VARCHAR" />
		<result  column="video_type" property="videoType" jdbcType="VARCHAR" />
		<result  column="video_size" property="videoSize" jdbcType="INTEGER" />
		<result  column="video_suffix" property="videoSuffix" jdbcType="VARCHAR" />
		<result  column="video_level" property="videoLevel" jdbcType="INTEGER" />
		<result  column="video_format" property="videoFormat" jdbcType="VARCHAR" />
		<result  column="video_path" property="videoPath" jdbcType="VARCHAR" />
		<result  column="video_desc" property="videoDesc" jdbcType="VARCHAR" />
		<result  column="video_ordering" property="videoOrdering" jdbcType="INTEGER" />
		<result  column="file_key" property="fileKey" jdbcType="VARCHAR" />
		<result  column="file_keys" property="fileKeys" jdbcType="VARCHAR" />
		<result  column="small_video_info" property="smallVideoInfo" jdbcType="VARCHAR" />
		<result  column="rendering_type" property="renderingType" jdbcType="INTEGER" />
		<result  column="sequence" property="sequence" jdbcType="INTEGER" />
		<result  column="task_create_time" property="taskCreateTime" jdbcType="TIMESTAMP" />
		<result  column="sys_task_pic_id" property="sysTaskPicId" jdbcType="INTEGER" />
		<result  column="sys_code" property="sysCode" jdbcType="VARCHAR" />
		<result  column="creator" property="creator" jdbcType="VARCHAR" />
		<result  column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
		<result  column="modifier" property="modifier" jdbcType="VARCHAR" />
		<result  column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
		<result  column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
		<result  column="att1" property="att1" jdbcType="VARCHAR" />
		<result  column="att2" property="att2" jdbcType="VARCHAR" />
		<result  column="numa1" property="numa1" jdbcType="INTEGER" />
		<result  column="numa2" property="numa2" jdbcType="INTEGER" />
		<result  column="remark" property="remark" jdbcType="VARCHAR" />
	</resultMap>
    <select id = "selectAutoVideoByBusinessId" resultMap="AutoVideoMap" parameterType="java.lang.Integer">
    	select
		<include refid="auto_render_video" />
		from auto_render_res_render_video
      	where business_id = #{businessId}
    </select>
    
     <!-- 按封面图id查询 -->
	<select id="selectBySysTaskPicId" resultMap="AutoVideoMap"
		parameterType="java.lang.Integer">
		select
		<include refid="auto_render_video" />
		from auto_render_res_render_video
		where sys_task_pic_id = #{sysTaskPicId,jdbcType=INTEGER}
	</select>
	<select id="getProductDTOList" resultType="com.nork.design.model.ProductDTO" parameterType="java.lang.Integer">
		SELECT d.product_id as productId, d.product_type_value as productTypeValue, ssd.valuekey as valueKey,d.pos_index_path as posIndexPath FROM
		(SELECT c.*,b.product_type_value,b.product_small_type_value  FROM (select a.* FROM  onekey_decoration_design_plan_product a WHERE a.plan_id = #{designPlanId} AND a.is_deleted = 0) c 
 		LEFT JOIN base_product b ON b.is_deleted = 0 AND c.init_product_id = b.id ) d 
		LEFT JOIN sys_dictionary bsd ON bsd.type='productType' AND bsd.value=d.product_type_value AND bsd.is_deleted=0
		INNER JOIN sys_dictionary ssd ON ssd.type=bsd.valuekey AND ssd.value= d.product_small_type_value AND ssd.is_deleted=0
	</select>




	<select id="costDetailPartOne" resultMap="costDetailResult" parameterType="com.nork.design.model.DesignPlanProduct">
		SELECT
		bp.id
		,bp.product_name
		,bp.sale_price unitPrice
		,(bp.sale_price*COUNT(1)) totalPrice
		,COUNT(1) totalCount
		,bp.product_model_number productModelNumber
		,bp.product_spec productSpec
		,bp.product_desc productDesc
		,bp.product_code productCode
		,dp.pos_index_path as posIndexPath        	  <!-- 挂节点 -->
		,dp.is_main_product as isMainProduct      	  <!-- 是否是主产品 -->
		,dp.id as planProductId						  <!-- 方案产品id -->
		,bp.product_type_mark as categoryCode		  <!-- 产品分类编码 -->
		,bp.product_small_type_mark as smallCategoryCode<!-- 产品小分类编码 -->
		,bp.product_type_value as productTypeValue		<!-- 产品类别value···大类 -->
		,bp.product_small_type_value as productSmallTypeValue  <!-- 产品类别value···小类 -->
		,dp.plan_group_id as sourcePlanGroupId          	  <!-- 设计方案组合ID-->
		,dp.product_group_id as sourceProductGroupId  	  <!-- 产品组合ID -->
		,dp.group_product_uniqueId as sourceGroupProductUniqueId		<!-- 组合产品唯一标识 -->
		,dp.split_textures_choose_info <!-- 默认材质信息  -->
		,dp.is_standard		<!-- 描述(区域、尺寸代码) -->
		,dp.region_mark		<!-- 区域标识 -->
		,dp.style_id		<!-- 款式id -->
		,dp.measure_code	<!-- 尺寸代码 -->
		,dp.is_replace_texture<!-- 是否做了材质替换(0:否;1:是) -->
		,bp.product_type_value as typeValue
		,bp.brand_id as brandId
		,s2.valuekey
		,s2.att2 as att2
		,gp.id as sourceGroupProductId
		,gp.group_code as sourceGroupProductCode
		,gp.structure_id
		,dp2.space_common_id as spaceCommonId
		,dp2.design_template_id as designTemplet_id
		FROM
		onekey_decoration_design_plan_product dp
		LEFT JOIN base_product bp ON bp.id = dp.product_id
		LEFT JOIN sys_dictionary s1 ON bp.product_type_value = s1.value AND s1.type = 'productType'
		LEFT JOIN sys_dictionary s2 ON s2.value = bp.product_small_type_value AND s2.type = s1.valuekey
		LEFT JOIN group_product gp on gp.id = dp.product_group_id
		LEFT JOIN onekey_decoration_design_plan dp2 ON dp2.id = dp.plan_id
		<if test="platformId != null">
			LEFT JOIN platform2b_product_rel AS ppr ON ppr.product_id = dp.product_id
		</if>
		WHERE
		dp.is_deleted = 0
		<if test="platformId != null">
			AND ppr.platform_id = #{platformId,jdbcType=INTEGER} AND ppr.putaway_state = 1 AND ppr.allot_state = 1
		</if>
		<if test="planId != null and planId != ''">
			AND dp.plan_id = #{planId,jdbcType=INTEGER}
		</if>
		AND s2.att3 != 'baimo'
		GROUP BY bp.id
	</select>

	<select id="costDetailPartTwo" resultMap="costDetailResult" parameterType="java.util.List">
		SELECT
		basePro.id
		,bb.brand_name
		,rp.pic_path productPicPath
		,rp1.pic_path productOriginalPicPath
		,sd.name productUnit
		,pc.id as pro_category_id
		,pc.long_code as pro_category_long_code
		FROM
		base_product basePro
		left join pro_category pc on basePro.product_small_type_mark = pc.code
		LEFT JOIN res_pic rp ON basePro.pic_id = rp.id
		LEFT JOIN res_pic rp1 ON basePro.pic_ids = rp1.id
		LEFT JOIN base_brand bb ON bb.id = basePro.brand_id
		LEFT JOIN sys_dictionary sd on sd.value = basePro.sale_price_value and sd.type='productUnitPrice'
		WHERE
		basePro.id
		IN
		<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
			#{item.productId}
		</foreach>
	</select>




	<!-- new costList -->
	<select id="newCostList" resultMap="costListResult" parameterType="java.util.List">
		SELECT
		s3.value costTypeValue
		,s3.valuekey costTypeCode
		,s3.name costTypeName
		FROM
		(SELECT bs.type,bs.valuekey,bs.value,bs.name,bs.ordering FROM sys_dictionary bs WHERE bs.type = 'productType' ORDER BY bs.ordering) s1
		LEFT JOIN sys_dictionary s2 ON s2.type = s1.valuekey
		LEFT JOIN (SELECT tal.type,tal.valuekey,tal.value,tal.name,tal.ordering FROM sys_dictionary tal WHERE tal.type = 'total' ORDER BY tal.ordering) s3 ON s3.valuekey = s2.att2
		WHERE
		s1.value
		IN
		<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
			#{item.productTypeValue}
		</foreach>
		AND
		s2.value
		IN
		<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
			#{item.productSmallTypeValue}
		</foreach>
		AND
		s2.att3 != 'baimo'
		GROUP BY s2.att2
		ORDER BY s3.ordering,s2.ordering
	</select>



	<!-- new costTypeList -->
	<select id="newCostTypeList" resultMap="costTypeListResult" parameterType="java.util.List">
		SELECT
		GROUP_CONCAT(s1.valuekey) costCodes
		,s2.value costTypeValue
		,s2.valuekey costTypeCode
		,s2.name costTypeName
		FROM
		(SELECT  bs.type, bs.valuekey, bs.value, bs.name, bs.ordering, bs.att1 FROM  sys_dictionary bs WHERE bs.type = 'total' ORDER BY bs.ordering) s1
		LEFT JOIN(SELECT  sd.type, sd.valuekey, sd.value, sd.name, sd.ordering FROM sys_dictionary sd WHERE sd.type = 'totalType' ORDER BY sd.ordering) s2 ON s1.att1 = s2.valuekey
		WHERE
		s1.att1 IS NOT NULL
		AND
		s1.valuekey
		IN
		<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
			#{item.costTypeCode}
		</foreach>
		GROUP BY s1.att1
	</select>


	<!--通过taskId查询平台id-->
	<select id="getPlatformIdBytaskId" parameterType="integer" resultType="integer">
		select platform_id from auto_render_task_state where task_id = #{taskId,jdbcType=INTEGER}
	</select>
</mapper>
