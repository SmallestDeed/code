<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sandu.service.company.dao.BaseAdminFranchiserMapper">
    <select id="listFranchiser" resultType="com.sandu.api.company.model.bo.AdminFranchiserBO">
        select
          c.id company_id,
          c.pid,
          c.company_code,
          c.company_name,
          c.brand_id brand_ids,
          c.phone contact_telephone,
          c.company_industrys company_industry_ids
        from
          base_company c
        where c.business_type = 2
          and c.is_deleted = 0
          and c.pid = #{pid}
          <if test="companyCode != null and companyCode != ''">
              and company_code like concat('%', #{companyCode},'%')
          </if>
          <if test="companyName != null and companyName != ''">
              and company_name like concat('%', #{companyName},'%')
          </if>
          <if test="companyIds != null and companyIds.size > 0">
              and id in
              <foreach collection="companyIds" item="item" open="(" separator="," close=")">
                  #{item}
              </foreach>
          </if>
          <if test="companyIndustries != null and companyIndustries.size > 0">
              and (
                  <foreach collection="companyIndustries" item="item" open="(" separator=" or " close=")">
                      company_industrys like concat('%', #{item}, '%')
                  </foreach>
              )
          </if>
    </select>
</mapper>